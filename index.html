<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Beck Kitchen">
<meta name="theme-color" content="#0d0d0b">
<title>Beck Kitchen</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Karla:wght@300;400;500&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #0d0d0b; --surface: #161614; --surface2: #1e1e1a;
  --border: #2a2a24; --border2: #363630;
  --text: #e8e4d8; --text-dim: #8a8474; --text-muted: #4a4840;
  --accent: #b5956a; --accent-dim: #7a6245; --accent-glow: rgba(181,149,106,0.10);
  --danger: #c0614a; --serif: 'Cormorant Garamond', Georgia, serif; --sans: 'Karla', sans-serif;
}
* { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
body { background: var(--bg); color: var(--text); font-family: var(--sans); font-size: 15px; min-height: 100dvh; overflow-x: hidden; }

/* PIN */
#pin-screen { position: fixed; inset: 0; z-index: 1000; background: var(--bg); display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px 20px; }
.pin-logo { width: 180px; margin-bottom: 36px; filter: invert(1) brightness(0.75) sepia(0.3); }
.pin-title { font-family: var(--serif); font-size: 14px; letter-spacing: 0.18em; text-transform: uppercase; color: var(--text-muted); margin-bottom: 28px; }
.pin-dots { display: flex; gap: 14px; margin-bottom: 36px; }
.pin-dot { width: 12px; height: 12px; border-radius: 50%; border: 1px solid var(--border2); background: transparent; transition: all 0.15s; }
.pin-dot.filled { background: var(--accent); border-color: var(--accent); }
.pin-dot.error { background: var(--danger); border-color: var(--danger); }
.pin-keypad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; width: 240px; }
.pin-key { height: 64px; border-radius: 14px; background: var(--surface); border: 1px solid var(--border); color: var(--text); font-family: var(--sans); font-size: 22px; font-weight: 300; cursor: pointer; transition: all 0.1s; display: flex; align-items: center; justify-content: center; }
.pin-key:active { background: var(--surface2); border-color: var(--accent-dim); color: var(--accent); transform: scale(0.95); }
.pin-key.del { font-size: 16px; color: var(--text-dim); }
.pin-key.empty { background: transparent; border-color: transparent; cursor: default; }
.pin-error { color: var(--danger); font-size: 12px; letter-spacing: 0.08em; margin-top: -20px; margin-bottom: 10px; min-height: 16px; }

/* GOOGLE AUTH OVERLAY */
#auth-overlay { position: fixed; inset: 0; z-index: 1100; background: var(--bg); display: none; flex-direction: column; align-items: center; justify-content: center; padding: 40px 20px; text-align: center; }
#auth-overlay.show { display: flex; }
.auth-logo { width: 140px; margin-bottom: 30px; filter: invert(1) brightness(0.75) sepia(0.3); }
.auth-title { font-family: var(--serif); font-size: 26px; font-weight: 300; margin-bottom: 8px; }
.auth-sub { font-size: 13px; color: var(--text-dim); margin-bottom: 36px; line-height: 1.6; }
.google-btn { display: flex; align-items: center; gap: 12px; background: var(--surface); border: 1px solid var(--border2); border-radius: 12px; padding: 14px 24px; cursor: pointer; font-family: var(--sans); font-size: 15px; color: var(--text); transition: all 0.15s; }
.google-btn:active { border-color: var(--accent); color: var(--accent); }
.google-icon { width: 20px; height: 20px; }
.auth-cancel { margin-top: 20px; font-size: 13px; color: var(--text-muted); cursor: pointer; padding: 10px; }
.auth-cancel:active { color: var(--text-dim); }

/* SYNC BAR */
.sync-bar { position: fixed; top: 0; left: 0; right: 0; z-index: 500; background: var(--surface2); border-bottom: 1px solid var(--border); padding: 6px 16px; font-size: 12px; color: var(--text-muted); display: none; align-items: center; gap: 8px; justify-content: center; }
.sync-bar.show { display: flex; }
.sync-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--accent); animation: pulse 1.2s infinite; }
@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.3} }

/* HEADER */
#app { display: none; }
#app.visible { display: block; }
.app-header { position: sticky; top: 0; z-index: 100; background: var(--bg); border-bottom: 1px solid var(--border); padding: 0 16px; display: flex; align-items: center; justify-content: space-between; height: 58px; }
.header-logo { height: 36px; filter: invert(1) brightness(0.65) sepia(0.3); }
.header-actions { display: flex; gap: 8px; align-items: center; }
.admin-badge { font-size: 10px; letter-spacing: 0.1em; text-transform: uppercase; color: var(--accent); border: 1px solid var(--accent-dim); padding: 2px 8px; border-radius: 4px; }
.icon-btn { width: 36px; height: 36px; border: 1px solid var(--border2); background: var(--surface); border-radius: 8px; display: flex; align-items: center; justify-content: center; cursor: pointer; color: var(--text-dim); font-size: 17px; transition: all 0.15s; }
.icon-btn:active { background: var(--surface2); color: var(--accent); }

/* SEARCH */
.search-bar { padding: 10px 16px; border-bottom: 1px solid var(--border); }
.search-wrap { position: relative; }
.search-wrap input { width: 100%; background: var(--surface); border: 1px solid var(--border2); border-radius: 10px; color: var(--text); font-family: var(--sans); font-size: 14px; padding: 9px 14px 9px 36px; outline: none; transition: border-color 0.15s; }
.search-wrap input:focus { border-color: var(--accent-dim); }
.search-wrap input::placeholder { color: var(--text-muted); }
.search-icon { position: absolute; left: 11px; top: 50%; transform: translateY(-50%); color: var(--text-muted); font-size: 14px; pointer-events: none; }

/* CATEGORIES */
.category-scroll { display: flex; gap: 8px; padding: 10px 16px; overflow-x: auto; scrollbar-width: none; border-bottom: 1px solid var(--border); }
.category-scroll::-webkit-scrollbar { display: none; }
.cat-pill { flex-shrink: 0; padding: 5px 13px; border-radius: 20px; border: 1px solid var(--border2); background: var(--surface); color: var(--text-dim); font-size: 12px; font-family: var(--sans); letter-spacing: 0.04em; cursor: pointer; transition: all 0.15s; white-space: nowrap; }
.cat-pill.active { background: var(--accent-glow); border-color: var(--accent); color: var(--accent); }

/* LIST */
.recipe-list { padding: 8px 16px 40px; }
.cat-group-label { font-family: var(--serif); font-size: 11px; letter-spacing: 0.18em; text-transform: uppercase; color: var(--accent); padding: 18px 0 6px; border-top: 1px solid var(--border); margin-top: 4px; }
.cat-group-label:first-child { border-top: none; padding-top: 10px; }
.recipe-card { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: 13px 15px; cursor: pointer; transition: all 0.15s; margin-bottom: 8px; position: relative; overflow: hidden; }
.recipe-card::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 3px; background: var(--border2); transition: background 0.15s; }
.recipe-card:active { background: var(--surface2); }
.recipe-card:active::before { background: var(--accent); }
.card-name { font-family: var(--serif); font-size: 19px; font-weight: 400; line-height: 1.2; }
.card-sub { font-size: 12px; color: var(--text-dim); margin-top: 3px; }
.card-arrow { position: absolute; right: 14px; top: 50%; transform: translateY(-50%); color: var(--text-muted); font-size: 13px; }
.empty-state { text-align: center; padding: 60px 20px; color: var(--text-muted); }
.empty-state .ei { font-size: 36px; margin-bottom: 12px; }
.empty-state p { font-family: var(--serif); font-size: 18px; color: var(--text-dim); }
.loading-state { text-align: center; padding: 60px 20px; }
.loading-spinner { width: 32px; height: 32px; border: 2px solid var(--border2); border-top-color: var(--accent); border-radius: 50%; animation: spin 0.8s linear infinite; margin: 0 auto 16px; }
@keyframes spin { to { transform: rotate(360deg); } }

/* DETAIL */
.detail-view { position: fixed; inset: 0; z-index: 200; background: var(--bg); display: none; flex-direction: column; overflow-y: auto; animation: slideUp 0.2s ease; }
.detail-view.open { display: flex; }
@keyframes slideUp { from { transform: translateY(16px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
.detail-header { position: sticky; top: 0; z-index: 10; background: var(--bg); border-bottom: 1px solid var(--border); padding: 0 16px; display: flex; align-items: center; gap: 10px; height: 58px; flex-shrink: 0; }
.back-btn { display: flex; align-items: center; gap: 5px; color: var(--accent); font-size: 14px; cursor: pointer; background: none; border: none; font-family: var(--sans); padding: 0; }
.detail-cat-badge { margin-left: auto; font-size: 10px; letter-spacing: 0.12em; color: var(--text-muted); text-transform: uppercase; }
.detail-body { padding: 20px 16px 20px; flex: 1; }
.detail-name { font-family: var(--serif); font-size: 30px; font-weight: 300; line-height: 1.15; margin-bottom: 4px; }
.detail-note { font-size: 13px; color: var(--text-dim); font-style: italic; margin-bottom: 20px; }
.scaler-row { display: flex; align-items: center; gap: 12px; background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 10px 14px; margin-bottom: 24px; }
.scaler-label { font-size: 12px; color: var(--text-dim); letter-spacing: 0.06em; flex: 1; }
.scaler-controls { display: flex; align-items: center; gap: 10px; }
.scale-btn { width: 28px; height: 28px; border-radius: 7px; background: var(--surface2); border: 1px solid var(--border2); color: var(--text); font-size: 18px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-family: var(--sans); }
.scale-btn:active { border-color: var(--accent); color: var(--accent); }
.scale-val { font-family: var(--serif); font-size: 20px; min-width: 24px; text-align: center; }
.section-title { font-size: 10px; letter-spacing: 0.18em; text-transform: uppercase; color: var(--accent); margin-bottom: 10px; }
.ingredient-list { margin-bottom: 28px; }
.ingredient-row { display: flex; gap: 12px; padding: 9px 0; border-bottom: 1px solid var(--border); }
.ingredient-row:last-child { border-bottom: none; }
.ing-amount { font-family: var(--serif); font-size: 15px; color: var(--accent); min-width: 90px; flex-shrink: 0; }
.ing-name { font-size: 14px; color: var(--text); }
.steps-list { display: flex; flex-direction: column; gap: 14px; }
.step-row { display: flex; gap: 13px; }
.step-num { width: 26px; height: 26px; border-radius: 50%; border: 1px solid var(--accent-dim); color: var(--accent); font-size: 12px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; margin-top: 1px; font-family: var(--serif); }
.step-text { font-size: 14px; line-height: 1.6; color: var(--text-dim); padding-top: 3px; }
.detail-actions { padding: 20px 16px 40px; display: flex; gap: 10px; }

/* MODAL */
.modal-overlay { position: fixed; inset: 0; z-index: 300; background: rgba(0,0,0,0.7); display: none; align-items: flex-end; }
.modal-overlay.open { display: flex; }
.modal-sheet { background: var(--surface); border-radius: 20px 20px 0 0; width: 100%; max-height: 92dvh; overflow-y: auto; padding: 20px 16px 40px; animation: sheetUp 0.25s ease; }
@keyframes sheetUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
.modal-handle { width: 36px; height: 4px; background: var(--border2); border-radius: 2px; margin: 0 auto 20px; }
.modal-title { font-family: var(--serif); font-size: 22px; margin-bottom: 20px; }
.form-field { margin-bottom: 16px; }
.form-label { font-size: 11px; letter-spacing: 0.1em; text-transform: uppercase; color: var(--text-muted); margin-bottom: 6px; display: block; }
.form-input, .form-select, .form-textarea { width: 100%; background: var(--surface2); border: 1px solid var(--border2); border-radius: 10px; color: var(--text); font-family: var(--sans); font-size: 14px; padding: 10px 14px; outline: none; transition: border-color 0.15s; }
.form-input:focus, .form-select:focus, .form-textarea:focus { border-color: var(--accent-dim); }
.form-select { appearance: none; }
.form-textarea { min-height: 90px; resize: vertical; }
.form-btn { width: 100%; padding: 14px; border-radius: 12px; background: var(--accent); border: none; color: #0d0d0b; font-family: var(--sans); font-size: 15px; font-weight: 500; cursor: pointer; margin-top: 8px; transition: opacity 0.15s; }
.form-btn:active { opacity: 0.8; }
.form-btn.secondary { background: var(--surface2); border: 1px solid var(--border2); color: var(--text-dim); margin-top: 10px; }
.del-btn { width: 100%; padding: 12px; border-radius: 12px; background: transparent; border: 1px solid var(--danger); color: var(--danger); font-family: var(--sans); font-size: 14px; cursor: pointer; margin-top: 10px; transition: all 0.15s; }
.del-btn:active { background: rgba(192,97,74,0.1); }

/* NAV TABS */
.nav-tabs { display: flex; border-bottom: 1px solid var(--border); background: var(--bg); position: sticky; top: 58px; z-index: 90; }
.nav-tab { flex: 1; padding: 10px; text-align: center; font-size: 12px; letter-spacing: 0.08em; text-transform: uppercase; color: var(--text-muted); cursor: pointer; border-bottom: 2px solid transparent; transition: all 0.15s; position: relative; }
.nav-tab.active { color: var(--accent); border-bottom-color: var(--accent); }
.chat-badge { position: absolute; top: 7px; right: calc(50% - 22px); background: var(--danger); color: #fff; font-size: 9px; min-width: 16px; height: 16px; border-radius: 8px; display: flex; align-items: center; justify-content: center; padding: 0 4px; }

/* CHAT VIEW */
#chat-view { display: none; flex-direction: column; height: calc(100dvh - 58px - 41px); }
#chat-view.active { display: flex; }
.chat-messages { flex: 1; overflow-y: auto; padding: 12px 16px 8px; display: flex; flex-direction: column; gap: 10px; scroll-behavior: smooth; }
.chat-day-divider { text-align: center; font-size: 10px; letter-spacing: 0.1em; text-transform: uppercase; color: var(--text-muted); padding: 4px 0; }
.chat-msg { display: flex; flex-direction: column; max-width: 82%; }
.chat-msg.mine { align-self: flex-end; align-items: flex-end; }
.chat-msg.theirs { align-self: flex-start; align-items: flex-start; }
.chat-sender { font-size: 10px; letter-spacing: 0.06em; color: var(--accent); margin-bottom: 3px; text-transform: uppercase; }
.chat-bubble { padding: 9px 13px; border-radius: 16px; font-size: 14px; line-height: 1.5; word-break: break-word; }
.chat-msg.mine .chat-bubble { background: var(--accent); color: #0d0d0b; border-bottom-right-radius: 4px; }
.chat-msg.theirs .chat-bubble { background: var(--surface2); color: var(--text); border-bottom-left-radius: 4px; }
.chat-time { font-size: 10px; color: var(--text-muted); margin-top: 3px; }
.chat-input-bar { border-top: 1px solid var(--border); padding: 10px 16px; background: var(--bg); display: flex; gap: 10px; align-items: flex-end; padding-bottom: max(10px, env(safe-area-inset-bottom)); }
.chat-textarea { flex: 1; background: var(--surface); border: 1px solid var(--border2); border-radius: 20px; color: var(--text); font-family: var(--sans); font-size: 14px; padding: 9px 14px; outline: none; resize: none; max-height: 100px; overflow-y: auto; line-height: 1.4; transition: border-color 0.15s; }
.chat-textarea:focus { border-color: var(--accent-dim); }
.chat-textarea::placeholder { color: var(--text-muted); }
.chat-send-btn { width: 38px; height: 38px; border-radius: 50%; background: var(--accent); border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; flex-shrink: 0; transition: opacity 0.15s; }
.chat-send-btn:active { opacity: 0.75; }
.chat-send-btn svg { width: 16px; height: 16px; fill: #0d0d0b; }
.chat-empty { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--text-muted); gap: 10px; }
.chat-empty-icon { font-size: 36px; }
.chat-empty-text { font-family: var(--serif); font-size: 18px; color: var(--text-dim); }
.chat-empty-sub { font-size: 12px; }

/* NAME MODAL */
#name-modal { position: fixed; inset: 0; z-index: 400; background: rgba(0,0,0,0.75); display: none; align-items: center; justify-content: center; padding: 24px; }
#name-modal.show { display: flex; }
.name-sheet { background: var(--surface); border-radius: 20px; width: 100%; max-width: 360px; padding: 28px 20px; }
.name-sheet-title { font-family: var(--serif); font-size: 24px; font-weight: 300; margin-bottom: 6px; }
.name-sheet-sub { font-size: 13px; color: var(--text-dim); margin-bottom: 20px; }

/* PREP LIST */
#prep-view { display: none; flex-direction: column; height: calc(100dvh - 58px - 41px); overflow-y: auto; }
#prep-view.active { display: flex; }
.prep-header-bar { padding: 12px 16px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; gap: 10px; flex-shrink: 0; }
.prep-title-text { font-family: var(--serif); font-size: 18px; font-weight: 300; }
.prep-date-text { font-size: 11px; color: var(--text-muted); letter-spacing: 0.06em; }
.prep-upload-btn { display: flex; align-items: center; gap: 6px; background: var(--accent); color: #0d0d0b; border: none; border-radius: 8px; padding: 7px 12px; font-family: var(--sans); font-size: 12px; font-weight: 500; cursor: pointer; flex-shrink: 0; }
.prep-upload-btn:active { opacity: 0.8; }
.prep-section-label { font-size: 10px; letter-spacing: 0.18em; text-transform: uppercase; color: var(--accent); padding: 14px 16px 6px; }
.prep-item { display: flex; align-items: center; gap: 12px; padding: 11px 16px; border-bottom: 1px solid var(--border); cursor: pointer; transition: background 0.1s; }
.prep-item:active { background: var(--surface); }
.prep-status-pill { flex-shrink: 0; min-width: 90px; padding: 4px 10px; border-radius: 20px; font-size: 11px; letter-spacing: 0.06em; text-align: center; font-weight: 500; transition: all 0.15s; }
.prep-status-pill.needed { background: rgba(192,97,74,0.15); color: #e07060; border: 1px solid rgba(192,97,74,0.3); }
.prep-status-pill.inprogress { background: rgba(181,149,106,0.15); color: var(--accent); border: 1px solid var(--accent-dim); }
.prep-status-pill.done { background: rgba(80,160,100,0.15); color: #6bc48a; border: 1px solid rgba(80,160,100,0.3); }
.prep-item-name { flex: 1; font-size: 14px; color: var(--text); }
.prep-item-name.done-text { color: var(--text-muted); text-decoration: line-through; }
.prep-item-qty { font-size: 12px; color: var(--text-dim); white-space: nowrap; }
.prep-empty { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 12px; padding: 40px 24px; text-align: center; }
.prep-empty-icon { font-size: 36px; }
.prep-empty-title { font-family: var(--serif); font-size: 20px; color: var(--text-dim); }
.prep-empty-sub { font-size: 13px; color: var(--text-muted); line-height: 1.6; max-width: 260px; }
.prep-reset-btn { margin: 12px 16px; padding: 10px; border-radius: 10px; border: 1px solid var(--border2); background: transparent; color: var(--danger); font-family: var(--sans); font-size: 13px; cursor: pointer; width: calc(100% - 32px); }
.prep-reset-btn:active { background: rgba(192,97,74,0.1); }
.prep-progress-bar { height: 3px; background: var(--border); flex-shrink: 0; }
.prep-progress-fill { height: 100%; background: #6bc48a; transition: width 0.3s ease; }
</style>
</head>
<body>

<div class="sync-bar" id="sync-bar"><div class="sync-dot"></div><span id="sync-msg">Syncing‚Ä¶</span></div>

<!-- PIN SCREEN -->
<div id="pin-screen">
  <img class="pin-logo" id="pin-logo" alt="Restaurant Beck">
  <div class="pin-title">Kitchen Reference</div>
  <div class="pin-dots" id="pin-dots">
    <div class="pin-dot"></div><div class="pin-dot"></div>
    <div class="pin-dot"></div><div class="pin-dot"></div>
  </div>
  <div class="pin-error" id="pin-error"></div>
  <div class="pin-keypad">
    <button class="pin-key" onclick="pinKey('1')">1</button>
    <button class="pin-key" onclick="pinKey('2')">2</button>
    <button class="pin-key" onclick="pinKey('3')">3</button>
    <button class="pin-key" onclick="pinKey('4')">4</button>
    <button class="pin-key" onclick="pinKey('5')">5</button>
    <button class="pin-key" onclick="pinKey('6')">6</button>
    <button class="pin-key" onclick="pinKey('7')">7</button>
    <button class="pin-key" onclick="pinKey('8')">8</button>
    <button class="pin-key" onclick="pinKey('9')">9</button>
    <button class="pin-key empty"></button>
    <button class="pin-key" onclick="pinKey('0')">0</button>
    <button class="pin-key del" onclick="pinDel()">‚å´</button>
  </div>
</div>

<!-- GOOGLE AUTH OVERLAY -->
<div id="auth-overlay">
  <img class="auth-logo" id="auth-logo" alt="Restaurant Beck">
  <div class="auth-title">Admin Sign-In</div>
  <div class="auth-sub">Sign in with your Google account to enable editing. This only happens once per device.</div>
  <button class="google-btn" onclick="signInWithGoogle()">
    <svg class="google-icon" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
    Continue with Google
  </button>
  <div class="auth-cancel" onclick="cancelAuth()">Cancel ‚Äî go back to staff view</div>
</div>

<!-- MAIN APP -->
<div id="app">

  <div id="list-view">
    <header class="app-header">
      <img class="header-logo" id="header-logo" alt="Beck">
      <div class="header-actions">
        <span class="admin-badge" id="role-badge" style="display:none;">Admin</span>
        <div class="icon-btn" id="add-btn" onclick="openAdd()" style="display:none;">Ôºã</div>
      </div>
    </header>
    <div class="nav-tabs">
      <div class="nav-tab active" id="tab-recipes" onclick="switchTab('recipes')">Recipes</div>
      <div class="nav-tab" id="tab-prep" onclick="switchTab('prep')">Prep List</div>
      <div class="nav-tab" id="tab-chat" onclick="switchTab('chat')">Chat <span class="chat-badge" id="chat-unread-badge" style="display:none;"></span></div>
    </div>
    <div class="search-bar" id="recipe-search-bar">
      <div class="search-wrap">
        <span class="search-icon">‚åï</span>
        <input type="text" id="search-input" placeholder="Search recipes‚Ä¶" oninput="renderList()">
      </div>
    </div>
    <div class="category-scroll" id="cat-pills"></div>
    <div class="recipe-list" id="recipe-list">
      <div class="loading-state"><div class="loading-spinner"></div></div>
    </div>

    <!-- PREP LIST VIEW -->
    <div id="prep-view">
      <div class="prep-header-bar">
        <div>
          <div class="prep-title-text" id="prep-title-text">Today's Prep</div>
          <div class="prep-date-text" id="prep-date-text"></div>
        </div>
        <div style="display:flex;gap:8px;align-items:center;">
          <button class="prep-upload-btn" id="prep-upload-btn" style="display:none;" onclick="document.getElementById('prep-file-input').click()">
            ‚Üë Upload Excel
          </button>
          <input type="file" id="prep-file-input" accept=".xlsx,.xls" style="display:none;" onchange="handlePrepUpload(event)">
        </div>
      </div>
      <div class="prep-progress-bar"><div class="prep-progress-fill" id="prep-progress-fill" style="width:0%"></div></div>
      <div id="prep-list-container">
        <div class="prep-empty">
          <div class="prep-empty-icon">üìã</div>
          <div class="prep-empty-title">No Prep List</div>
          <div class="prep-empty-sub" id="prep-empty-sub">Ask the chef to upload today's prep list.</div>
        </div>
      </div>
    </div>

    <!-- CHAT VIEW -->
    <div id="chat-view">
      <!-- Sign-in wall (shown when not logged in) -->
      <div id="chat-signin-wall" style="flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 24px;text-align:center;gap:16px;">
        <div style="font-size:40px;">üí¨</div>
        <div style="font-family:var(--serif);font-size:24px;font-weight:300;">Kitchen Chat</div>
        <div style="font-size:13px;color:var(--text-dim);line-height:1.6;max-width:280px;">Sign in with your Google account to message the team. No admin access ‚Äî chat only.</div>
        <button class="google-btn" onclick="signInForChat()" style="margin-top:8px;">
          <svg class="google-icon" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>
          Sign in with Google
        </button>
      </div>
      <!-- Actual chat (shown when signed in) -->
      <div id="chat-authed" style="display:none;flex-direction:column;flex:1;min-height:0;">
        <div id="chat-user-bar" style="padding:8px 16px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;">
          <span id="chat-user-name" style="font-size:12px;color:var(--text-muted);letter-spacing:0.06em;"></span>
          <span onclick="signOutChat()" style="font-size:12px;color:var(--text-muted);cursor:pointer;padding:4px 0;">Sign out</span>
        </div>
        <div class="chat-messages" id="chat-messages"></div>
        <div class="chat-input-bar">
          <textarea class="chat-textarea" id="chat-input" placeholder="Message the team‚Ä¶" rows="1" oninput="autoResizeTextarea(this)" onkeydown="chatKeydown(event)"></textarea>
          <button class="chat-send-btn" onclick="sendMessage()">
            <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="detail-view" id="detail-view">
    <div class="detail-header">
      <button class="back-btn" onclick="closeDetail()">‚Üê Back</button>
      <span class="detail-cat-badge" id="detail-cat"></span>
    </div>
    <div class="detail-body">
      <div class="detail-name" id="detail-name"></div>
      <div class="detail-note" id="detail-note"></div>
      <div class="scaler-row">
        <span class="scaler-label">YIELD MULTIPLIER</span>
        <div class="scaler-controls">
          <button class="scale-btn" onclick="changeScale(-1)">‚àí</button>
          <span class="scale-val" id="scale-val">1√ó</span>
          <button class="scale-btn" onclick="changeScale(1)">+</button>
        </div>
      </div>
      <div class="ingredient-list" id="detail-ingredients"></div>
      <div id="detail-steps-wrap"></div>
    </div>
    <div class="detail-actions" id="detail-actions" style="display:none;">
      <button class="form-btn secondary" style="margin-top:0;" onclick="openEdit()">Edit Recipe</button>
      <button class="del-btn" style="margin-top:0;width:auto;padding:12px 20px;" onclick="deleteRecipe()">Delete</button>
    </div>
  </div>
</div>

<!-- ADD/EDIT MODAL -->
<div class="modal-overlay" id="modal-overlay" onclick="closeModal(event)">
  <div class="modal-sheet" onclick="event.stopPropagation()">
    <div class="modal-handle"></div>
    <div class="modal-title" id="modal-title">New Recipe</div>
    <div class="form-field"><label class="form-label">Recipe Name</label><input class="form-input" id="f-name" type="text" placeholder="e.g. Foie Gras Ganache"></div>
    <div class="form-field"><label class="form-label">Category</label><select class="form-select" id="f-cat"></select></div>
    <div class="form-field"><label class="form-label">Yield / Notes</label><input class="form-input" id="f-yield" type="text" placeholder="e.g. 12 portions, holds 1 week"></div>
    <div class="form-field"><label class="form-label">Ingredients (one per line: amount ‚Äî ingredient)</label><textarea class="form-textarea" id="f-ingredients" placeholder="250g ‚Äî Chocolate 72%&#10;300g ‚Äî Heavy Cream"></textarea></div>
    <div class="form-field"><label class="form-label">Method / Steps (one per line)</label><textarea class="form-textarea" id="f-steps" placeholder="Combine water and sugar. Boil 2 minutes.&#10;Incorporate into chocolate slowly."></textarea></div>
    <button class="form-btn" onclick="saveRecipe()">Save Recipe</button>
    <button class="form-btn secondary" onclick="closeModal()">Cancel</button>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, setDoc, addDoc, deleteDoc, doc, onSnapshot, query, orderBy, limit, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-storage.js";

const firebaseConfig = {
  apiKey: "AIzaSyDtn_GIhclAhBWhYZoHCy5kpbgHnxpLq6I",
  authDomain: "beck-kitchen-reference.firebaseapp.com",
  projectId: "beck-kitchen-reference",
  storageBucket: "beck-kitchen-reference.firebasestorage.app",
  messagingSenderId: "1076150647462",
  appId: "1:1076150647462:web:97974b77af810b35225267"
};

const fbApp = initializeApp(firebaseConfig);
const db = getFirestore(fbApp);
const auth = getAuth(fbApp);
const storage = getStorage(fbApp);
const provider = new GoogleAuthProvider();

// ‚îÄ‚îÄ LOGO (embedded) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const LOGO = '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';
document.getElementById('pin-logo').src = 'data:image/jpeg;base64,' + LOGO;
document.getElementById('auth-logo').src = 'data:image/jpeg;base64,' + LOGO;
document.getElementById('header-logo').src = 'data:image/jpeg;base64,' + LOGO;

// ‚îÄ‚îÄ CONSTANTS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const ADMIN_PIN = '0119';
const STAFF_PIN = '0226';
// version: 2
const AUTHORIZED_EMAIL = null; // Set to your email string to restrict, or leave null for any Google account
const CATEGORIES = ['Stocks','Sauces','Proteins','Breads & Doughs','Desserts','Purees & Emulsions','Cures & Preserved','Components','Hydrocolloid Reference','Other'];

const DEFAULT_RECIPES = [
  { id:'r1', name:'Chicken Stock', category:'Stocks', yield:'Basic ratio; scales as needed', ingredients:[{amount:'8 lbs',name:'Chicken Bones'},{amount:'1 lb',name:'Mirepoix'},{amount:'1 gal',name:'Cold Water'},{amount:'1 lb',name:'Chicken Feet'},{amount:'to taste',name:'Aromatics ‚Äî Peppercorns, Bay Leaves, Parsley Stems'}], steps:['Place bones in stock pot. Cover with cold water. Bring to a boil to blanch and remove impurities. Dump water, save bones.','Place bones back in pot with cold water, mirepoix, and aromatics. Bring to a boil.','Reduce heat to 185¬∞F. Skim as needed. Cook 3‚Äì4 hours.','Strain through chinois into shallow pan. Cool safely. Remove fat once cool.'] },
  { id:'r2', name:'Roasted Beef / Veal Stock', category:'Stocks', yield:'~1 gallon', ingredients:[{amount:'8 lbs',name:'Beef or Veal Bones'},{amount:'1 lb',name:'Mirepoix'},{amount:'1 gal',name:'Cold Water'},{amount:'2 ea',name:'Split Hog Foot'},{amount:'2 oz',name:'Tomato Paste'},{amount:'16 oz',name:'Red Wine'},{amount:'to taste',name:'Aromatics'}], steps:['Roast bones at 400¬∞F until golden/dark brown.','Caramelize mirepoix; pinc√© with tomato paste until fond develops. Deglaze with red wine; reduce by half.','Add roasted bones and cold water. Bring to a simmer. Skim impurities. Add aromatics.','Simmer at 185¬∞F for 4 hours. Strain through chinois. Cool in shallow pan.'] },
  { id:'r3', name:'Rhubarb Ketchup', category:'Sauces', yield:'Adjust consistency with xanthan', ingredients:[{amount:'2 lbs',name:'Rhubarb'},{amount:'¬º cup',name:'Apple Cider Vinegar'},{amount:'¬Ω cup',name:'Port LBV'},{amount:'1 cup',name:'Sugar'},{amount:'¬Ω ea',name:'Lemon, zest only'},{amount:'to taste',name:'Salt and Pepper'},{amount:'as needed',name:'Xanthan Gum'}], steps:['Combine rhubarb, vinegar, port, sugar, and lemon zest.','Simmer for 8 minutes.','Blend in VitaPrep until very smooth.','Season with salt and pepper. Adjust acid and sweetness.','Adjust consistency with xanthan gum to prevent syneresis.'] },
  { id:'r4', name:'Foie Gras Gastrique', category:'Sauces', yield:'~1 cup', ingredients:[{amount:'¬º cup',name:'Foie Gras Fat'},{amount:'¬Ω T',name:'Water'},{amount:'¬Ω cup',name:'Sugar'},{amount:'6 T',name:'Balsamic or Sherry Vinegar'}], steps:['Combine foie fat, water, and sugar. Cook over medium heat, whisking, until mixture looks like taffy.','Add vinegar while stirring. Reduce by half over 3 minutes.'] },
  { id:'r5', name:'Anchovy Cure', category:'Cures & Preserved', yield:'Hold at least 48 hrs before service', ingredients:[{amount:'as needed',name:'Kosher Salt'},{amount:'to cover',name:'White Wine Vinegar / Verjus'},{amount:'to taste',name:'Citrus Zest'},{amount:'to taste',name:'Crushed Red Chile'},{amount:'liberal',name:'Agrumato Lemon Oil'}], steps:['Chop off heads. Layer anchovies between layers of kosher salt.','Cover with white wine vinegar. Wait 24 hours.','Remove from marinade and gently remove spine.','Layer anchovies between layers of citrus zest and crushed red chiles.','Liberally season with verjus and agrumato lemon oil. Let sit at least 24 hours before using.'] },
  { id:'r6', name:'Sardine Cure', category:'Cures & Preserved', yield:'24‚Äì48 hr cure depending on size', ingredients:[{amount:'as needed',name:'Kosher Salt'},{amount:'to cover',name:'Yuzu Juice'},{amount:'to taste',name:'Lime Zest'},{amount:'to taste',name:'Togarashi'},{amount:'to cover',name:'Olive Oil'}], steps:['Fillet sardines. Cover with kosher salt. Let sit 10‚Äì15 minutes.','Remove excess salt. Combine lime zest and togarashi; re-season sardines.','Cover with yuzu juice and olive oil. Cure 24‚Äì48 hours depending on size.'] },
  { id:'r7', name:'Black Sesame Pur√©e', category:'Purees & Emulsions', yield:'Holds well refrigerated', ingredients:[{amount:'230g',name:'Black Sesame Seeds'},{amount:'100g',name:'Sesame Oil'},{amount:'1g',name:'Ultra-Tex 8'}], steps:['Lightly toast seeds in sesame oil over low heat until aroma is achieved.','Pur√©e in VitaPrep at medium-low speed until very, very smooth ‚Äî about 10 minutes.','Once consistency is achieved, shear in Ultra-Tex 8 until smooth.'] },
  { id:'r8', name:'Brown Butter Pur√©e', category:'Purees & Emulsions', yield:'~1 cup', ingredients:[{amount:'8 oz',name:'Browned Milk Solids'},{amount:'3 oz',name:'Water'},{amount:'2 tsp',name:'Corn Syrup'},{amount:'1 T',name:'Sherry Vinegar'}], steps:['Combine all ingredients.','Blend until smooth and emulsified.'] },
  { id:'r9', name:'Whipped Crispy Artichokes', category:'Components', yield:'Check every 15 min during drying', ingredients:[{amount:'300g',name:'Poached Artichoke Liquid'},{amount:'3.4g',name:'Methocel F50'},{amount:'0.51g',name:'Xanthan Gum'},{amount:'40g',name:'Maltrin M100'}], steps:['Place artichoke liquid in blender. Increase to medium speed until vortex forms. Sprinkle in xanthan gum and Methocel; shear on high until no clumps.','Pour into metal bowl in ice bath. Stir and chill to 10¬∞C to fully hydrate Methocel.','Pour chilled mixture back into blender on medium; add Maltrin and blend on high until homogenous.','Transfer to stand mixer with whisk. Whip from low to high until stiff peaks ‚Äî light, airy, shapeable.','Spoon irregular dollops onto silicone-lined sheet pan with thin film of release.','Dry in 76¬∞C oven for 1 hour. Check every 15 min. Flip and dry bottoms 20 more minutes. Done when completely dry throughout.'] },
  { id:'r10', name:'Foie Gras Ganache', category:'Components', yield:'Refrigerate after setting', ingredients:[{amount:'750g',name:'Foie Gras'},{amount:'15g',name:'Kosher Salt'},{amount:'1.5g',name:'Pink Salt (curing salt)'},{amount:'11.3g',name:'Sugar'},{amount:'225g',name:'Heavy Cream'},{amount:'7.5g',name:'Silver Gelatin'},{amount:'75g',name:'Heavy Cream (second addition)'}], steps:['While foie is cooking, combine salt, curing salt, sugar, and first cream. Set aside.','Bloom gelatin in second addition of cold cream.','Process foie with seasoned cream mixture until smooth.','Incorporate bloomed gelatin. Pass through tamis if needed.','Set in desired mold. Refrigerate until firm.'] },
  { id:'r11', name:'Chocolate Cr√©meux', category:'Components', yield:'Pour into molds immediately', ingredients:[{amount:'250g',name:'Chocolate, 72%'},{amount:'300g',name:'Heavy Cream'},{amount:'160g',name:'Water'},{amount:'2g',name:'Agar Agar'},{amount:'49g',name:'Sorbitol'},{amount:'20g',name:'Glucose Powder'},{amount:'1g',name:'Bolivian Rose Salt'},{amount:'2.5 sheets',name:'Silver Gelatin'}], steps:['Combine water, sorbitol, agar agar, and glucose. Boil for 2 minutes.','Scald cream; slowly incorporate into chocolate ‚Äî go slow, no air bubbles.','Slowly add sorbitol-water mixture to the chocolate.','Stir in bloomed gelatin. Pour into desired molds. Chill until set.'] },
  { id:'r12', name:'Almond "Granola"', category:'Components', yield:'~10 oz', ingredients:[{amount:'4 oz',name:'Marcona Almonds, Whole'},{amount:'1 oz',name:'Glucose Powder'},{amount:'3 oz',name:'Marshmallow'},{amount:'2 oz',name:'Water'},{amount:'to taste',name:'Salt'}], steps:['Combine glucose powder, water, and marshmallow. Bring to a simmer.','Add almonds and cook until coated. Cool completely.','Grind to desired texture. Bake until set.'] },
  { id:'r13', name:'Parisienne Gnocchi', category:'Breads & Doughs', yield:'Large batch; freeze extras', ingredients:[{amount:'1¬Ω cups',name:'Water'},{amount:'12 T (6 oz)',name:'Unsalted Butter'},{amount:'1 T + 1 tsp',name:'Kosher Salt'},{amount:'2 cups',name:'All-Purpose Flour, sifted'},{amount:'2 T',name:'Dijon Mustard'},{amount:'1 T ea',name:'Chervil, Chives, Parsley, Tarragon ‚Äî chopped'},{amount:'1 cup',name:'Comt√© or Emmentaler, shredded'},{amount:'5‚Äì6 ea',name:'Large Eggs'}], steps:['Set up heavy-duty mixer with paddle. Have all ingredients ready.','Combine water, butter, 1 tsp salt; bring to simmer. Add flour all at once; stir until dough pulls from sides. Stir on heat ~5 min. Transfer to mixer.','Add mustard, herbs, 1 T salt, cheese. Mix briefly. On low, add 3 eggs one at a time. Increase to medium; add 2 more. Dough should slide slowly off a spatula.','Transfer to large pastry bag with 5/8" tip. Rest 30 minutes at room temp.','Pipe 1-inch lengths into lightly simmering salted water. Poach 1‚Äì2 min after floating. Drain on paper towels.','Single-layer on parchment; refrigerate 30 min before saut√©ing, or freeze for storage.'] },
  { id:'r14', name:'Brioche', category:'Breads & Doughs', yield:'1 loaf or formed rolls', ingredients:[{amount:'¬Ω cup',name:'Water, Warm'},{amount:'¬º oz',name:'Active Dry Yeast'},{amount:'10¬Ω oz',name:'Cake Flour'},{amount:'10 oz',name:'All-Purpose Flour'},{amount:'‚Öì cup',name:'Sugar'},{amount:'2¬Ω tsp',name:'Salt'},{amount:'6 ea',name:'Eggs, Whole, Room Temperature'},{amount:'10 oz',name:'Butter, Cubed, Room Temperature'}], steps:['Dissolve yeast in warm water. Combine with flours, sugar, salt, and eggs. Mix on medium until dough develops.','Add butter a few cubes at a time, ensuring full incorporation before adding more.','Mix until smooth, shiny, and pulling away from sides cleanly.','Bulk ferment until doubled. Punch down, shape, refrigerate overnight.','Final proof until nearly doubled. Egg wash and bake at 375¬∞F until deep golden.'] },
  { id:'r15', name:'Corn Bread', category:'Breads & Doughs', yield:'10" cast iron or 8" square pan', ingredients:[{amount:'4 T',name:'Butter, olive oil, lard, or bacon drippings'},{amount:'1¬Ω cups',name:'Medium-grind Cornmeal'},{amount:'¬Ω cup',name:'All-Purpose Flour'},{amount:'1¬Ω tsp',name:'Baking Powder'},{amount:'1 tsp',name:'Salt'},{amount:'¬º‚Äì¬Ω cup',name:'Sugar'},{amount:'2 ea',name:'Eggs'},{amount:'1¬º cups',name:'Milk, plus more if needed'}], steps:['Preheat oven to 375¬∞F. Put fat in cast-iron skillet; place in oven to heat.','Combine dry ingredients. Whisk eggs into milk; stir into dry ingredients with a few swift strokes.','When fat and oven are hot, pour in batter. Smooth top. Bake ~30 minutes until lightly browned and toothpick comes out clean.'] },
  { id:'r16', name:'Pine Nut Tart Dough', category:'Breads & Doughs', yield:'One 10" tart shell', ingredients:[{amount:'10 oz',name:'Pine Nuts, Toasted and Ground'},{amount:'1 lb',name:'All-Purpose Flour'},{amount:'‚Öì cup',name:'Sugar'},{amount:'8 oz',name:'Butter'},{amount:'1 ea',name:'Egg'},{amount:'1 tsp',name:'Vanilla'}], steps:['Combine ground pine nuts, flour, and sugar.','Cut in cold butter until mixture resembles coarse crumbs.','Add egg and vanilla; mix until dough just comes together.','Rest in refrigerator before rolling. Blind bake as needed.'] },
  { id:'r17', name:'Financier', category:'Desserts', yield:'Holds 1 week refrigerated', ingredients:[{amount:'250g',name:'Unsalted Butter'},{amount:'100g',name:'Almond Flour'},{amount:'100g',name:'All-Purpose Flour'},{amount:'295g',name:"Confectioner's Sugar"},{amount:'245g (8 large)',name:'Egg Whites'}], steps:['Cook butter to light brown in heavy saucepan, whisking occasionally. Reserve warm.','Combine dry ingredients.','Manually whip egg whites until just frothy and yellow dissipates. Whisk in almond flour mixture.','Slowly whisk in warm brown butter, ensuring complete emulsification.','Chill at least 2 hours. Bake at 325‚Äì350¬∞F convection for smaller pieces; 300‚Äì325¬∞F for larger.'] },
  { id:'r18', name:'Warm Almond Cake', category:'Desserts', yield:'17‚Äì20 min at 350¬∞F', ingredients:[{amount:'10.5 oz',name:'Almond Paste'},{amount:'¬Ω cup',name:'Sugar, Granulated'},{amount:'6 oz',name:'Butter, Unsalted'},{amount:'1¬æ oz',name:'Honey'},{amount:'5.5 ea',name:'Eggs, Whole'},{amount:'1¬æ oz',name:'Amaretto'},{amount:'¬Ω cup',name:'All-Purpose Flour'},{amount:'pinch',name:'Salt'}], steps:['Combine sugar and almond paste; cream for 4 minutes.','Add butter; mix 8 minutes until light and airy. Scrape sides as needed.','Mix in honey. Add eggs one at a time until fully incorporated.','Add amaretto, flour, and salt. Mix until just combined.','Bake at 350¬∞F for 17‚Äì20 minutes until golden brown.'] },
  { id:'r19', name:'Dense Chocolate', category:'Desserts', yield:'Chill at least 4 hours', ingredients:[{amount:'1 lb',name:'Bittersweet Chocolate'},{amount:'8 oz',name:'Butter'},{amount:'6 ea',name:'Egg Yolks'},{amount:'6 ea',name:'Egg Whites'},{amount:'‚Öì cup',name:'Honey'},{amount:'¬º cup',name:'Sugar, Granulated'}], steps:['Melt butter and chopped chocolate over a double boiler.','Whip egg whites with sugar to medium peaks; reserve.','Bring honey to a boil; stream into egg yolks while whipping on high until cool.','Stir in melted chocolate mixture. Fold in whipped egg whites.','Place into desired mold. Chill at least 4 hours.'] },
  { id:'r20', name:'Cr√®me Br√ªl√©e / Ice Cream / Cr√®me Anglaise', category:'Desserts', yield:'1 quart', ingredients:[{amount:'1 qt',name:'Heavy Cream'},{amount:'8 oz',name:'Sugar, Granulated'},{amount:'10 ea',name:'Egg Yolks'},{amount:'1 ea',name:'Vanilla Bean'}], steps:['Split and scrape vanilla bean; steep in cream until scalded.','Whisk sugar into egg yolks until pale. Temper hot cream into yolk mixture.','For anglaise: return to heat and cook to 180¬∞F (nappe).','For cr√®me br√ªl√©e: pour into ramekins; bake in water bath at 325¬∞F until barely set. Chill. Br√ªl√©e to serve.','For ice cream: chill base over ice bath; churn per machine instructions.'] },
  { id:'r21', name:'Lemon Curd', category:'Desserts', yield:'~2 cups', ingredients:[{amount:'¬Ω cup',name:'Unsalted Butter'},{amount:'¬º cup',name:'Cr√®me Fra√Æche'},{amount:'2 ea',name:'Eggs, Whole'},{amount:'3 ea',name:'Egg Yolks'},{amount:'¬æ cup',name:'Fresh Lemon Juice'},{amount:'¬æ cup',name:'Sugar'},{amount:'1¬Ω tsp',name:'Lemon Zest'}], steps:['Melt butter and cr√®me fra√Æche together over a double boiler. Set aside.','In a bowl over simmering water, whisk eggs and yolks until warmed. Beat in butter mixture, then lemon juice.','Strain through a sieve into a clean bowl. Return to simmering water.','Add sugar and zest; whisk until warm to touch, about 4 minutes. Chill immediately.'] },
  { id:'r22', name:'Lemon Tart (Sabayon & P√¢te Sabl√©e)', category:'Desserts', yield:'One 10" tart', ingredients:[{amount:'2 ea',name:'Eggs, Cold'},{amount:'2 ea',name:'Egg Yolks, Cold'},{amount:'¬æ cup',name:'Sugar'},{amount:'¬Ω cup',name:'Fresh Lemon Juice'},{amount:'6 T',name:'Unsalted Butter, Cold'},{amount:'¬æ lb',name:'Butter (for dough)'},{amount:'3¬Ω cups',name:'Flour (for dough)'},{amount:'4 ea',name:'Eggs (for dough)'},{amount:'¬Ω cup',name:'Sugar (for dough)'},{amount:'4 T',name:'Cold Water'}], steps:['P√¢te Sabl√©e: Combine flour and sugar; cut in cold butter. Add eggs and water; mix until dough just comes together. Refrigerate.','Roll and blind bake tart shell at 350¬∞F until golden. Cool.','Lemon Sabayon: Whisk cold eggs, yolks, sugar, and lemon juice in a bowl over simmering water.','Whisk continuously until thick and ribbon-like, ~8‚Äì10 minutes.','Remove from heat; whisk in cold butter pieces one at a time.','Pour into baked shell. Torch if desired. Chill to set.'] },
  { id:'r23', name:'Lace Cookies / D√©cor', category:'Desserts', yield:'Watch closely ‚Äî burns fast', ingredients:[{amount:'5 oz',name:'Corn Syrup'},{amount:'5 oz',name:'Butter, Unsalted'},{amount:'5 oz',name:'Sugar'},{amount:'5 oz',name:'All-Purpose Flour'}], steps:['Combine corn syrup, butter, and sugar. Cook to a boil, stirring.','Remove from heat; stir in flour until incorporated.','Drop small spoonfuls onto silpat-lined sheet pan. Bake at 325¬∞F until spread and golden.','Cool briefly; shape while still pliable over molds or cylinders.'] },
  { id:'h1', name:'Agar ‚Äî Fluid Gel', category:'Hydrocolloid Reference', yield:'See ratios below', ingredients:[{amount:'0.5%',name:'Agar (5g per 1000g) ‚Äî soft, pourable, loose. Good for sauces & fluid applications'},{amount:'1.0%',name:'Agar (10g per 1000g) ‚Äî sweet spot. Sets firm, blends smooth and glossy'},{amount:'1.5%',name:'Agar (15g per 1000g) ‚Äî stiffer set, very stable. Good for piping or structured applications'},{amount:'1.5‚Äì2.0%',name:'Agar (15‚Äì20g per 1000g) ‚Äî heat stable. Holds on a hot plate through service, won\'t melt until ~185¬∞F'}], steps:['Hydrate agar in cold liquid. Bring to a full boil ‚Äî must hit 185¬∞F+ to activate properly.','Season and finish as needed.','Pour into shallow pan. Let set completely ‚Äî do not rush.','Blend in VitaPrep on high until completely smooth and fluid.','Pass through fine tamis if needed.','Heat-stable notes: at 1.5‚Äì2.0%, gel resists melting on a hot plate (holds to ~185¬∞F vs gelatin which melts at ~95¬∞F). Higher solids content and tight blending improve stability further. Avoid high-fat bases as fat can interfere with gel structure.'] },
  { id:'h2', name:'Xanthan Gum ‚Äî Sauce Body', category:'Hydrocolloid Reference', yield:'See ratios below', ingredients:[{amount:'0.1%',name:'Xanthan (1g per 1000g) ‚Äî very light. Barely noticeable viscosity, just a touch of body'},{amount:'0.2‚Äì0.3%',name:'Xanthan (2‚Äì3g per 1000g) ‚Äî sweet spot. Adds body, prevents syneresis, still pours cleanly'},{amount:'0.5%+',name:'Xanthan (5g+ per 1000g) ‚Äî thick, gel-like. Starts to feel gluey if pushed further'}], steps:['Always shear in ‚Äî whisk vigorously or use VitaPrep on high. Will not hydrate properly by hand stirring alone.','Can be added to cold or warm liquid. Hydrates faster in warm.','Xanthan is shear-thinning: flows more easily under pressure (pouring, squeeze bottle) and thickens back at rest ‚Äî ideal for plating.','A little goes a long way. Always easier to add more than to fix an over-xanthaned sauce.','See Rhubarb Ketchup in this app for a real-world example of xanthan use.'] },
  { id:'h3', name:'Gelatin ‚Äî Ratios & Usage', category:'Hydrocolloid Reference', yield:'See ratios below', ingredients:[{amount:'1.5‚Äì2%',name:'Gelatin (15‚Äì20g per 1000g) ‚Äî firm set. Panna cotta, terrines, molded gels'},{amount:'0.5‚Äì1%',name:'Gelatin (5‚Äì10g per 1000g) ‚Äî soft set. Glazes, lightly gelled sauces, velout√© body'},{amount:'1 sheet silver',name:'Silver gelatin ‚âà 2.5g. Blooms in cold water 5‚Äì10 min before use'},{amount:'Note',name:'Melts at ~95¬∞F ‚Äî not heat stable. Do not use on hot plates.'}], steps:['Bloom gelatin sheets in cold water 5‚Äì10 minutes until soft.','Wring out excess water. Melt into warm (not boiling) liquid ‚Äî above 140¬∞F destroys setting power.','For precise work, weigh gelatin rather than counting sheets (silver sheet = ~2.5g).','Set in refrigerator. Allow full chill before unmolding ‚Äî minimum 2 hours, overnight preferred.','Not heat stable ‚Äî will melt above ~95¬∞F. Use agar fluid gel for hot plate applications.'] },
  { id:'h4', name:'Methocel F50 ‚Äî Hot Gels', category:'Hydrocolloid Reference', yield:'See ratios below', ingredients:[{amount:'1.5‚Äì2%',name:'Methocel F50 (15‚Äì20g per 1000g) ‚Äî standard hot gel. Sets when heated, melts when cold'},{amount:'Note',name:'Reverse-sets: liquid when cold, solid when hot ‚Äî opposite of all other gels'},{amount:'Key',name:'Must be hydrated in cold liquid (below 50¬∞F / ice bath) before use'}], steps:['Disperse Methocel into cold liquid using high shear (blender/VitaPrep) ‚Äî it will not hydrate in warm liquid.','Chill mixture in ice bath until fully hydrated and smooth, ~10‚Äì15 minutes.','When heated above ~130¬∞F, the mixture sets firm. When cooled, it returns to liquid.','Applications: hot foams, gels that hold shape when served warm, fried gels, hot gel noodles.','See Whipped Crispy Artichokes in this app for a real-world Methocel application.'] },
  { id:'h5', name:'Ultra-Tex 8 ‚Äî Cold Thickening', category:'Hydrocolloid Reference', yield:'See ratios below', ingredients:[{amount:'1‚Äì3%',name:'Ultra-Tex 8 (10‚Äì30g per 1000g) ‚Äî adjust to desired consistency'},{amount:'Note',name:'Modified tapioca starch ‚Äî thickens without heat, no cooking required'},{amount:'Key',name:'Shear in with VitaPrep or high-speed blender for smooth result'}], steps:['Add Ultra-Tex 8 to finished, cold or room temp preparation.','Shear in using VitaPrep or high-speed blender until smooth ‚Äî do not hand whisk.','Thickens instantly without heat. Adjust amount to reach desired viscosity.','Very stable ‚Äî holds well under refrigeration, does not weep or synerese.','See Black Sesame Pur√©e in this app for a real-world Ultra-Tex 8 application.'] },
  { id:'r31', name:'Chocolate Sauce', category:'Sauces', yield:'46 fl oz', ingredients:[{amount:'2 cups',name:'Water'},{amount:'1 cup',name:'Sugar, Granulated'},{amount:'1 cup',name:'Corn Syrup'},{amount:'1.5 cups',name:'Ghirardelli Cocoa Powder'},{amount:'2 oz',name:'Chocolate, 66%'}], steps:['Combine water, sugar, and corn syrup in a saucepan. Bring to a boil, stirring until sugar dissolves.','Whisk in cocoa powder until fully incorporated with no lumps.','Remove from heat; stir in chopped 66% chocolate until melted and smooth.','Reserve warm or refrigerate. Rewarm gently before service.'] },
  { id:'r32', name:'Duck Confit', category:'Proteins', yield:'~20 legs (5kg batch)',
    ingredients:[
      {amount:'100g (2.0%)',name:'Kosher Salt'},
      {amount:'25g (0.5%)',name:'Sugar, Granulated'},
      {amount:'50g (1.0%)',name:'Garlic, Smashed'},
      {amount:'15g (0.3%)',name:'Fresh Thyme'},
      {amount:'5‚Äì6 leaves',name:'Bay Leaf, Crumbled'},
      {amount:'7‚Äì8g',name:'Cracked Black Pepper'},
      {amount:'~2g (optional)',name:'Orange Zest ‚Äî OR ‚Äî'},
      {amount:'2‚Äì3g (optional)',name:'Juniper Berries, Lightly Crushed'},
      {amount:'5.5‚Äì6.5 kg',name:'Duck Fat (enough to fully submerge legs)'},
    ],
    steps:[
      'Mix cure ingredients. Coat legs evenly on all sides. Refrigerate uncovered 24 hours.',
      'Rinse cure from legs. Pat thoroughly dry.',
      'Submerge legs completely in duck fat. Shallow pan requires closer to 6.5kg; deep narrow pot closer to 5.5kg. Avoid supplementing with oil ‚Äî pure duck fat produces noticeably cleaner flavor and mouthfeel.',
      'Cook at 90‚Äì95¬∞C (195‚Äì203¬∞F) for ~3 hours. Fat should remain completely calm ‚Äî no bubbling or frying.',
      'Done when: meat yields easily, bone wiggles freely, no resistance in connective tissue.',
      'Cool in fat or remove and crisp skin to order in a hot pan fat-side down.',
    ]
  },
  { id:'r33', name:'Pork Belly Confit Cure', category:'Proteins', yield:'Cure for one belly; scale as needed',
    ingredients:[
      {amount:'6 oz',name:'Kosher Salt'},
      {amount:'1¬Ω tsp',name:'Pink Salt (curing salt)'},
      {amount:'2 T',name:'Fennel Seed'},
      {amount:'1 tsp',name:'Black Peppercorn'},
      {amount:'2 tsp',name:'Cayenne'},
      {amount:'2 oz (or 3 oz brown)',name:'Sugar'},
      {amount:'1 tsp',name:'Thyme, Dried, Ground'},
      {amount:'1 tsp',name:'Fennel Pollen'},
      {amount:'¬Ω tsp (optional)',name:'Licorice Root, Fresh, Grated'},
    ],
    steps:[
      'Combine all cure ingredients.',
      'Coat pork belly evenly on all sides.',
      'Refrigerate covered for 24‚Äì48 hours depending on thickness.',
      'Rinse cure. Pat dry. Confit in fat or proceed with desired cooking method.',
    ]
  },
  { id:'r34', name:'Calamansi ‚Äì White Shoyu Vinaigrette', category:'Sauces', yield:'~105g; scale as needed',
    ingredients:[
      {amount:'60g',name:'Calamansi Juice'},
      {amount:'30g',name:'White Shoyu'},
      {amount:'10‚Äì15g',name:'Neutral Oil'},
      {amount:'0.15‚Äì0.25g',name:'Xanthan Gum (0.15‚Äì0.25% of total liquid weight)'},
    ],
    steps:[
      'Combine calamansi juice and white shoyu.',
      'Stream in neutral oil while whisking to emulsify.',
      'Transfer to VitaPrep or use immersion blender. With blender running, sprinkle in xanthan gum and shear on high until fully incorporated and smooth.',
      'Taste and adjust acid or shoyu balance as needed. The vinaigrette should be bright, clean, and lightly viscous.',
      'Reserve refrigerated. Re-shear briefly if separation occurs.',
    ]
  },
  { id:'r35', name:'Asian-Influenced Royale Custard (Savory Pain Perdu)', category:'Components', yield:'~8‚Äì10 thick slices',
    ingredients:[
      {amount:'500g',name:'Heavy Cream'},
      {amount:'130g',name:'Whole Eggs (~2.5‚Äì3 eggs)'},
      {amount:'20g',name:'Egg Yolks (optional but recommended)'},
      {amount:'14g',name:'White Shoyu or Light Soy'},
      {amount:'8g',name:'Mirin'},
      {amount:'1‚Äì2g',name:'Sesame Oil (do not exceed)'},
      {amount:'pinch',name:'Salt'},
      {amount:'optional',name:'Thin slice fresh ginger or tiny pinch white pepper'},
    ],
    steps:[
      'Gently warm cream with ginger if using. Steep 10‚Äì15 minutes, strain, cool slightly.',
      'Whisk eggs and yolk gently ‚Äî avoid aeration.',
      'Season cream with shoyu, mirin, sesame oil, and salt. Taste for balance.',
      'Combine cream and eggs. Briefly blend 5‚Äì8 seconds on lowest speed to homogenize.',
      'Strain through fine chinois. Rest 10‚Äì20 minutes before using.',
      'Pain Perdu use: dip bread briefly 3‚Äì5 seconds per side. Cook gently in butter over medium-low heat.',
    ]
  },
  { id:'r36', name:'Bosc Pear Jam (Foie Gras Optimized)', category:'Components', yield:'~1000g yield; no pectin',
    ingredients:[
      {amount:'1000g',name:'Bosc Pears, peeled, small dice'},
      {amount:'380‚Äì450g',name:'Sugar'},
      {amount:'35g',name:'Lemon Juice'},
      {amount:'pinch',name:'Salt'},
      {amount:'40‚Äì60g (optional)',name:'Sauternes-style or dry white wine'},
      {amount:'optional',name:'Tiny pinch white pepper or restrained vanilla'},
    ],
    steps:[
      'Toss pears with sugar, salt, and lemon juice. Rest 30‚Äì45 minutes.',
      'Cook in wide pan over medium heat ‚Äî do not rush.',
      'Simmer until pears fully soften and liquid reduces.',
      'Target temperature: 103‚Äì105¬∞C (217‚Äì221¬∞F).',
      'Lightly blend for spreadable texture if desired.',
      'Add optional wine or spice at finish. Adjust acidity as needed.',
    ]
  },
  { id:'r37', name:'Beet "Cylinder"', category:'Components', yield:'Dehydrate ~3 hours until crispy',
    ingredients:[
      {amount:'10 oz',name:'Red Beet Juice'},
      {amount:'2 sheets',name:'Silver Gelatin'},
      {amount:'25g',name:'Egg White Powder'},
      {amount:'1.4g',name:'Methocel F50'},
      {amount:'2 tsp',name:'Sugar'},
      {amount:'to taste',name:'Salt'},
    ],
    steps:[
      'Bloom gelatin in half of the beet juice. Warm until fully dissolved.',
      'Add reserved cold beet juice to VitaPrep. With blender running slowly, add egg white powder.',
      'Shear in Methocel F50, sugar, and salt ‚Äî about 10 seconds.',
      'Slowly pour in warm gelatin-juice mixture while blending.',
      'Transfer to stand mixer with whisk. Whip until stiff peaks form ‚Äî about 8 minutes.',
      'Spread or pipe into desired cylinder shape. Dehydrate ~3 hours until completely crispy. Reserve.',
    ]
  },
  { id:'r38', name:'Miso Butterscotch', category:'Sauces', yield:'~32 oz',
    ingredients:[
      {amount:'10 oz',name:'Light Brown Sugar'},
      {amount:'7 oz',name:'Glucose'},
      {amount:'3 oz',name:'Butter'},
      {amount:'7 oz',name:'Milk'},
      {amount:'5 oz',name:'White Miso'},
    ],
    steps:[
      'Combine brown sugar and glucose in a heavy saucepan. Cook over medium heat until deeply caramelized.',
      'Add butter and stir to incorporate.',
      'Slowly add milk, stirring carefully ‚Äî mixture will bubble.',
      'Whisk in white miso until fully incorporated and smooth.',
      'Simmer briefly to combine. Strain if needed. Reserve warm or refrigerate.',
    ]
  },
  { id:'r39', name:'Lemon ‚Äì Orange Pur√©e', category:'Purees & Emulsions', yield:'Pass through tamis before service',
    ingredients:[
      {amount:'150g',name:'Lemon Zest ‚Äî peeler only, absolutely no white pith'},
      {amount:'50g',name:'Orange Zest ‚Äî peeler only, no white pith'},
      {amount:'very small pinch',name:'Saffron'},
      {amount:'1 qt',name:'Simple Syrup'},
      {amount:'1 ea',name:'Lemon, Juiced'},
      {amount:'15g',name:'Agrumato Lemon Oil'},
      {amount:'to taste',name:'Salt'},
    ],
    steps:[
      'Blanch lemon and orange peel in boiling salted water for 45 seconds. Shock in ice water and drain.',
      'Add lemon peel to simple syrup with saffron. Cook until peel is completely tender, about 10 minutes.',
      'Separate solids from liquid ‚Äî reserve cooking liquid.',
      'VitaPrep peel with cooking liquid, lemon juice, and agrumato lemon oil as needed to reach smooth consistency.',
      'Season with salt. Pass through fine tamis.',
    ]
  },
  { id:'r40', name:'Quick Pickle Brine ‚Äî Fennel', category:'Components', yield:'~500g brine; ready in 20‚Äì30 min',
    ingredients:[
      {amount:'250g',name:'Water'},
      {amount:'250g',name:'White Wine Vinegar'},
      {amount:'50g',name:'Sugar'},
      {amount:'10g',name:'Kosher Salt'},
    ],
    steps:[
      'Combine all ingredients in a saucepan. Bring to a boil, stirring until sugar and salt are fully dissolved.',
      'Pour hot brine directly over fennel branch. Cool to room temp, then refrigerate.',
      'Ready in 20‚Äì30 minutes. Better after a few hours.',
    ]
  },
  { id:'r25', name:'Caramel Sauce', category:'Sauces', yield:'~3100g', ingredients:[{amount:'3200g',name:'Sugar, Granulated'},{amount:'960g',name:'Water'},{amount:'1920g',name:'Heavy Cream'},{amount:'1360g',name:'Butter, Unsalted, cold diced'},{amount:'68g',name:'Kosher Salt'}], steps:['Make "wet sand" with water and sugar. Make sure no sugar is stuck on sides of pan.','Caramelize sugar until dark golden brown.','Turn off heat. Slowly add heavy cream, stirring carefully. Whisk in cold diced butter. Season with salt. Reserve.'] },
  { id:'r26', name:'Marsala Jus', category:'Sauces', yield:'4 quarts', ingredients:[{amount:'7 lbs',name:'Chicken Backs'},{amount:'1 gal',name:'Chicken Stock'},{amount:'6 lbs',name:'Cremini Mushrooms'},{amount:'2 lbs',name:'Yellow Onions'},{amount:'1 lb',name:'Celery'},{amount:'1 lb',name:'Carrots'},{amount:'4 oz',name:'Tomato Paste'},{amount:'1 oz',name:'Fresh Thyme'},{amount:'1 oz',name:'Fresh Rosemary'},{amount:'¬º bottle',name:'Sheffield Marsala'},{amount:'16 oz',name:'Red Wine (Sangiovese)'},{amount:'3 gal',name:'Water'}], steps:['Roast chicken backs until deeply golden. Reserve.','Caramelize mirepoix vegetables in rondeaux. Add tomato paste; pinc√©.','Deglaze with Marsala and red wine; reduce by half.','Add roasted bones, stock, water, and aromatics. Simmer low and slow 3‚Äì4 hours.','Strain through chinois. Reduce to desired consistency.'] },
  { id:'r27', name:'Ragu d\'Agnello (Lamb Ragu)', category:'Sauces', yield:'2 gallons', ingredients:[{amount:'10 lbs',name:'Ground Lamb'},{amount:'1 can',name:'Crushed Tomatoes'},{amount:'2 lbs',name:'Yellow Onions'},{amount:'1 lb',name:'Carrots'},{amount:'1 lb',name:'Celery'},{amount:'3g',name:'Fresh Rosemary'},{amount:'3.5g',name:'Fresh Thyme'},{amount:'0.05 bunch',name:'Fresh Oregano'},{amount:'15g',name:'Kosher Salt'},{amount:'7g',name:'Black Pepper'},{amount:'6 oz',name:'Tomato Paste'},{amount:'1 qt',name:'Red Wine'}], steps:['In rondeaux, brown lamb until deeply caramelized. Remove any excess fat.','Grind mirepoix in Robot Coupe. Reserve.','Once lamb is browned and excess fat removed, add mirepoix and sweat until vegetables are tender.','Add tomato paste and caramelize. Deglaze with red wine; reduce by half.','Add crushed tomatoes; bring to a simmer. Cover and braise in 375¬∞F oven for 90‚Äì120 minutes.','Remove from oven. Season with salt, pepper, lemon juice, crushed red pepper, and Firelli hot sauce.','Cool in shallow pan in walk-in.'] },
  { id:'r28', name:'Tomato Fennel Broth', category:'Sauces', yield:'5.5 quarts', ingredients:[{amount:'725g',name:'Fresh Fennel'},{amount:'465g',name:'Yellow Onions'},{amount:'1 can',name:'Whole Tomatoes'},{amount:'2 T',name:'Kosher Salt'},{amount:'1 T',name:'Black Pepper'},{amount:'1.5 tsp',name:'Calabrian Chili'},{amount:'2 ea',name:'Fresh Oranges'},{amount:'6 oz',name:'Dry White Wine'},{amount:'¬Ω gal',name:'Water'}], steps:['Sweat fennel and onions until soft and translucent.','Add Calabrian chili; cook briefly.','Add white wine; reduce by half.','Add tomatoes, water, orange zest and juice. Simmer 30‚Äì45 minutes.','Season with salt and pepper. Strain or leave rustic as needed.'] },
  { id:'r29', name:'House Bread ‚Äî Soft Italian', category:'Breads & Doughs', yield:'30 loaves (175g each)', ingredients:[{amount:'1683g',name:'Hi-Gluten Flour'},{amount:'1683g',name:'Pizza Flour'},{amount:'2154g',name:'Water'},{amount:'135g',name:'Sugar, Granulated'},{amount:'135g',name:'Blend Oil 75/25'},{amount:'67g',name:'Kosher Salt'},{amount:'101g',name:'Powdered Milk'},{amount:'44g',name:'Instant Dry Yeast'}], steps:['Combine all dry ingredients in floor mixer with dough hook. Add water.','Mix on low 3 minutes. Mix on medium 5 minutes.','Bulk ferment until doubled.','Divide into 175g balls. Shape torpedo. Proof 45‚Äì60 minutes.','Bake at 375¬∞F for 14‚Äì17 minutes.','Remove from oven; liberally brush with bread oil and Pecorino Romano. Return to oven 2 minutes.'] },
  { id:'r30', name:'Corfini Braised Pork Shank', category:'Proteins', yield:'17 portions', ingredients:[{amount:'16.5 lbs',name:'Corfini Pork Shanks'},{amount:'3 qt',name:'Chicken Stock'},{amount:'1 lb',name:'Carrots'},{amount:'1 lb',name:'Celery'},{amount:'2 lbs',name:'Yellow Onions'},{amount:'3 oz',name:'Tomato Paste'},{amount:'1 liter',name:'Sangiovese Red Wine'}], steps:['Season shanks generously; sear in rondeaux until deeply browned on all sides. Remove and reserve.','In same pan, caramelize mirepoix. Add tomato paste; pinc√© until fond develops.','Deglaze with red wine; reduce by half. Add chicken stock.','Return shanks to braising liquid. Liquid should come halfway up shanks.','Cover and braise in 325¬∞F oven until fork tender, approximately 2.5‚Äì3 hours.','Remove shanks carefully. Strain and reduce braising liquid to sauce consistency. Adjust seasoning.'] },
  { id:'r41', name:'Braised Lamb Necks', category:'Proteins', yield:'2 lamb necks (~3 lb / 1360g)',
    ingredients:[
      {amount:'2 ea (~1360g)',name:'Lamb Necks'},
      {amount:'275‚Äì340g',name:'Mirepoix (onion, carrot, celery)'},
      {amount:'500ml',name:'Red Wine'},
      {amount:'500ml',name:'Water'},
      {amount:'250ml',name:'Lamb Demi'},
      {amount:'20‚Äì25g',name:'Tomato Paste'},
      {amount:'2‚Äì3 sprigs',name:'Fresh Thyme'},
      {amount:'11‚Äì13g',name:'Kosher Salt (initial seasoning)'},
    ],
    steps:[
      'Season lamb necks generously with salt. Sear in a heavy-bottomed pan or rondeaux over high heat until deeply browned on all sides. Remove and reserve.',
      'In same pan, sweat mirepoix until softened and lightly caramelized.',
      'Add tomato paste; cook until pinc√©, 2‚Äì3 minutes.',
      'Deglaze with red wine; reduce by half, scraping up fond.',
      'Add water and lamb demi. Return necks to pan ‚Äî liquid should come roughly halfway up.',
      'Add thyme sprigs. Cover tightly and braise at 300‚Äì325¬∞F until completely tender and meat yields easily from bone, approximately 3‚Äì3.5 hours.',
      'Remove necks carefully. Strain braising liquid; reduce to desired sauce consistency. Adjust seasoning before service.',
    ]
  },
  { id:'r42', name:'Milk Crumbs', category:'Components', yield:'Small batch',
    ingredients:[
      {amount:'¬º cup + 1 T',name:'Nonfat Milk Powder (divided)'},
      {amount:'2 T',name:'All-Purpose Flour'},
      {amount:'1 T',name:'Cornstarch'},
      {amount:'1¬Ω tsp',name:'Sugar, Granulated'},
      {amount:'‚Öõ tsp',name:'Salt'},
      {amount:'1¬Ω T',name:'Unsalted Butter, melted'},
      {amount:'¬º cup',name:'White Chocolate, melted'},
    ],
    steps:[
      'Combine 2 T + 1 tsp milk powder with flour, cornstarch, sugar, and salt. Mix in melted butter until clumps form.',
      'Spread on a parchment-lined sheet pan. Bake at 225¬∞F for approximately 8 minutes until dry but not browned.',
      'Cool 10 minutes. Toss with melted white chocolate and remaining milk powder until coated.',
      'Spread back on pan and allow to set completely before storing.',
    ]
  },
  { id:'r43', name:'Fennel ‚Äì Buttermilk Pur√©e', category:'Purees & Emulsions', yield:'Per 1000g raw fennel',
    ingredients:[
      {amount:'1000g',name:'Fennel, trimmed and thinly sliced'},
      {amount:'75g',name:'Butter or neutral oil (for sweating)'},
      {amount:'600g',name:'Buttermilk, warm'},
      {amount:'22g',name:'Ultra-Tex 8'},
      {amount:'10‚Äì12g',name:'Kosher Salt'},
      {amount:'optional',name:'Small squeeze lemon juice OR few drops white balsamic'},
    ],
    steps:[
      'Trim fennel ‚Äî remove stalks and woody core. Slice thin for even cooking.',
      'Sweat fennel gently in butter or oil over medium-low heat. Target: fully soft, completely pale, no browning at all. Browning muddies the flavor and fights the buttermilk. Cook until completely tender ‚Äî this step determines final silkiness more than the blender.',
      'While fennel is still warm, add to blender with buttermilk, fat, and salt. Blend on high until absolutely smooth. If you see any texture at all, keep blending. Proper pur√©e = glossy, zero graininess.',
      'Reduce blender to medium speed until a visible vortex forms. Slowly rain in Ultra-Tex 8 ‚Äî do not dump. Watch the texture shift: liquid ‚Üí sauce ‚Üí pudding. Stop as soon as pur√©e holds soft peaks, moves like loose pastry cream, and has no elasticity or gumminess.',
      'Taste. If flavor feels round or dull, add a tiny squeeze of lemon or a few drops of white balsamic. Acid sharpens the fennel and lifts the buttermilk significantly.',
      'Texture check: should sit on a spoon without running, relax slowly when nudged, and pipe cleanly without stiffness. Too loose ‚Üí add 1‚Äì2g more Ultra-Tex. Too thick ‚Üí splash of buttermilk. Ultra-Tex is extremely responsive ‚Äî adjust in small increments.',
    ]
  },
  { id:'r44', name:'Cucumber Water', category:'Components', yield:'Pass through fine chinois',
    ingredients:[{amount:'4 ea',name:'Cucumbers, rough chopped'},{amount:'2 T',name:'Kosher Salt'}],
    steps:['Rough chop cucumbers.','Place in blender. Add salt.','Pur√©e on high speed until smooth.','Pass through fine mesh chinois. Reserve cold.']
  },
  { id:'r45', name:'Nasturtium Vinegar', category:'Components', yield:'~2.75 cups',
    ingredients:[{amount:'2 cups',name:'Distilled Vinegar'},{amount:'¬æ cup',name:'Sugar, Granulated'},{amount:'2 tsp',name:'Shallot, minced'},{amount:'150 ea',name:'Nasturtium Blossoms'},{amount:'to taste',name:'Salt'}],
    steps:['Place blossoms and shallots in a stainless steel or glass bowl.','Bring vinegar and sugar to a simmer, stirring until sugar dissolves.','Pour hot vinegar mixture over blossoms. Steep 15 minutes.','Place over ice bath to cool. Reserve for vinaigrette.']
  },
  { id:'r46', name:'Puffed Rice', category:'Components', yield:'Fry at 400¬∞F until golden',
    ingredients:[{amount:'1 cup',name:'Brown Rice, overcooked'},{amount:'as needed',name:'Neutral oil for frying'},{amount:'to taste',name:'Kosher Salt'}],
    steps:['Cook rice until well past done ‚Äî intentionally overcooked.','Dehydrate rice until just dry.','Fry at 400¬∞F until golden brown and puffed.','Remove from oil, drain, season with salt immediately. Reserve.']
  },
  { id:'r47', name:'Grilled Spine Dashi', category:'Stocks', yield:'~1 quart',
    ingredients:[{amount:'1 ea',name:'Fish Spine (black cod, ling cod, or halibut)'},{amount:'to taste',name:'Kombu'},{amount:'to taste',name:'Dried Shiitake Mushrooms'},{amount:'~1 qt',name:'Water'},{amount:'optional',name:'Salt, soy, or white soy to taste'}],
    steps:['Dry spine thoroughly with paper towels.','Grill over medium-high heat, charring to desired level of smokiness.','Bring ~1 qt water to low heat. Add kombu and steep approximately 15 minutes. Remove kombu.','Add dried shiitakes and grilled spine. Simmer gently. Season to taste.','Strain before service.']
  },
  { id:'r48', name:'Miso Leather', category:'Components', yield:'Dehydrate 4‚Äì6 hours at 155¬∞F',
    ingredients:[{amount:'150g',name:'Aka-Miso (red miso)'},{amount:'150g',name:'Water'},{amount:'to taste',name:'Salt'},{amount:'to taste',name:'Ultra-Tex 8'},{amount:'to taste',name:'Xanthan Gum'},{amount:'optional',name:'Soy sauce or acid to taste'}],
    steps:['Combine water and miso over low heat, stirring until combined and slightly warm.','Transfer to blender. Blend on high. Season with salt. Adjust with soy or acid as needed.','Bring blender back to speed and shear in xanthan gum and Ultra-Tex 8 until smooth.','Pass through tamis or drum sieve.','Spread thin and even onto a silpat-lined sheet pan.','Dehydrate at 155¬∞F for 4‚Äì6 hours, or 185¬∞F on convection ‚Äî watch carefully. Reserve.']
  },
  { id:'r49', name:'Gnocchi (P√¢te √† Choux)', category:'Breads & Doughs', yield:'~5‚Äì6 dozen',
    ingredients:[{amount:'1¬Ω cups',name:'Water'},{amount:'12 T (6 oz)',name:'Unsalted Butter'},{amount:'1 T + 1 tsp',name:'Kosher Salt'},{amount:'2 cups + 2 T',name:'All-Purpose Flour, sifted'},{amount:'2 T',name:'Dijon Mustard OR 4 oz flavorful pur√©e'},{amount:'5‚Äì6 ea',name:'Whole Eggs, room temperature'}],
    steps:['Combine water, butter, and salt. Bring to a simmer.','Add all sifted flour at once. Stir with whisk then switch to wooden spoon or spatula.','Stir constantly until dough is tacky and pulls away from sides and bottom of pan.','Remove from heat. Transfer to stand mixer bowl with paddle attachment.','Mix on medium speed. Add mustard or pur√©e and incorporate fully.','Add room temperature eggs one at a time, fully incorporating each before adding the next.','Reserve for service. Pipe or spoon into simmering water to order.']
  },
  { id:'r50', name:'Whey Gastrique', category:'Sauces', yield:'Reduce to nap√© consistency',
    ingredients:[{amount:'4 qts',name:'Whey, reserved from ricotta'},{amount:'¬æ cup',name:'Sugar, Granulated'},{amount:'3 cups',name:'Champagne Vinegar'},{amount:'as needed',name:'Butter'}],
    steps:['Reduce whey by two-thirds in a wide pot. Reserve.','In a clad-bottom stainless pot, dry caramelize sugar to desired color.','Slowly add champagne vinegar to caramel ‚Äî use extreme caution, steam is intense. Stir until incorporated.','Reduce by half or until nap√© consistency.','Slowly whisk in reduced whey. Reduce heat and continue reducing until desired acidity, sweetness, and mouthfeel are achieved.','Finish with butter to order if desired.']
  },
  { id:'r51', name:'Small Tomato Stew', category:'Sauces', yield:'Small batch / per order',
    ingredients:[{amount:'1 lb',name:'Sungold, cherry, or petit heirloom tomatoes, halved'},{amount:'2 tsp',name:'Shallots, minced'},{amount:'1 tsp',name:'Garlic, minced'},{amount:'3 oz',name:'Dry White Wine'},{amount:'as needed',name:'Spine Dashi'},{amount:'to taste',name:'Fresh Thyme'},{amount:'as needed',name:'Olive Oil'}],
    steps:['Heat saucepan over high heat. Add oil, then blister tomatoes quickly.','Add minced garlic and shallots while tomatoes are still blistering. Reduce heat and sweat until aromatic.','Add white wine. Reduce by half.','Add dashi and fresh thyme sprigs. Simmer briefly until cohesive. Season and serve immediately.']
  },
  { id:'r52', name:'Champagne Shallot Mustard Vinaigrette', category:'Sauces', yield:'~470g',
    ingredients:[{amount:'110g',name:'Champagne Vinegar'},{amount:'330g',name:'Blended Oil'},{amount:'30g',name:'Shallots, fine brunoise'},{amount:'16g',name:'Dijon Mustard'},{amount:'3g',name:'Kosher Salt'},{amount:'to taste',name:'Black Pepper'},{amount:'6‚Äì8g (optional)',name:'Honey'}],
    steps:['Combine vinegar, Dijon, shallots, salt, pepper, and honey. Whisk until fully integrated.','Slowly stream in oil while whisking continuously until fully emulsified.','Optional variations: chives, tarragon, lemon zest, parsley/fines herbes, verjus splash.']
  },
  { id:'r53', name:'Banyuls Shallot Mustard Vinaigrette', category:'Sauces', yield:'~470g',
    ingredients:[{amount:'125g',name:'Banyuls Vinegar'},{amount:'325g',name:'Blended Oil'},{amount:'30g',name:'Shallots, fine brunoise'},{amount:'16g',name:'Dijon Mustard'},{amount:'3g',name:'Kosher Salt'},{amount:'to taste',name:'Black Pepper'},{amount:'4‚Äì6g',name:'Honey or sugar'}],
    steps:['Combine vinegar and shallots. Rest 5‚Äì10 minutes.','Add Dijon and seasoning. Whisk thoroughly.','Slowly stream in oil while whisking until emulsified.','Optional variations: orange zest, thyme, black garlic, sherry vinegar splash, cracked coriander.']
  },
  { id:'r54', name:'Rice Wine Shallot Mustard Vinaigrette', category:'Sauces', yield:'~490g',
    ingredients:[{amount:'140g',name:'Rice Wine Vinegar'},{amount:'320g',name:'Blended Oil'},{amount:'28‚Äì30g',name:'Shallots, fine brunoise'},{amount:'15g',name:'Dijon Mustard'},{amount:'3g',name:'Kosher Salt'},{amount:'to taste',name:'White Pepper'},{amount:'6‚Äì8g',name:'Honey or sugar'},{amount:'5‚Äì8g (optional)',name:'Lemon Juice'}],
    steps:['Combine vinegar and shallots. Rest 5 minutes.','Add Dijon, seasoning, and sweetener. Whisk well.','Slowly stream in oil while whisking until emulsified.','Optional variations: yuzu or lemon zest, scallions, few drops sesame oil, ginger juice, small amount cilantro.']
  },
  { id:'r55', name:'White Distilled Vinegar Vinaigrette', category:'Sauces', yield:'~480g',
    ingredients:[{amount:'80g',name:'White Distilled Vinegar'},{amount:'40g',name:'Water'},{amount:'330g',name:'Blended Oil'},{amount:'30g',name:'Shallots, fine brunoise'},{amount:'16g',name:'Dijon Mustard'},{amount:'3g',name:'Kosher Salt'},{amount:'10‚Äì12g',name:'Honey or sugar'}],
    steps:['Combine vinegar, water, and shallots. Rest 10 minutes.','Add Dijon, seasoning, and sweetener. Whisk thoroughly.','Slowly stream in oil while whisking until emulsified.','Taste and adjust carefully. Optional variations: extra honey, lemon zest, parsley/herbs, small knob melted butter.']
  },
  { id:'r56', name:'Carrot ‚Äì Miso ‚Äì Cream Pur√©e', category:'Purees & Emulsions', yield:'Per 1000g carrots',
    ingredients:[{amount:'1000g',name:'Carrots, peeled and thinly sliced'},{amount:'400g',name:'Heavy Cream'},{amount:'80g',name:'Butter'},{amount:'50‚Äì55g',name:'White Miso (adjust to taste)'},{amount:'to taste',name:'Salt (minimal ‚Äî miso is salty)'},{amount:'4‚Äì8g (optional)',name:'Rice vinegar or lemon juice'}],
    steps:['Slice carrots thin for even cooking.','Sweat gently in butter over medium-low heat until completely tender. Avoid browning.','Warm cream separately ‚Äî do not boil.','Transfer warm carrots, cream, butter, and most of the miso to blender. Blend on high until absolutely smooth and glossy.','Taste and adjust miso incrementally. Add acid if pur√©e feels too round or flat.','Optional: shear in Ultra-Tex 8 at 1.8‚Äì2.2% of total weight for pudding-silky texture. Xanthan at 0.15‚Äì0.25% for minor tightening only.','Optional variations: brown butter, orange zest, black garlic, ginger juice, few drops sesame oil.']
  },
  { id:'r24', name:'Pomme Dauphine', category:'Components', yield:'Fry at 375¬∞F until golden',
    ingredients:[{amount:'2¬Ω lbs',name:'Russet Potatoes'},{amount:'¬Ω cup',name:'Butter'},{amount:'1 cup',name:'Water'},{amount:'2 T',name:'Kosher Salt'},{amount:'1 cup',name:'All-Purpose Flour, Sifted'},{amount:'4 ea',name:'Eggs, Large'},{amount:'to taste',name:'Black Pepper'}],
    steps:['Bring butter, water, and salt to a boil. Add all flour at once; stir rapidly, lower heat, cook until ball forms and pulls from sides. Cool slightly.','Whip eggs into p√¢te √† choux one at a time using stand mixer.','Boil potatoes until soft. Drain; dry briefly in oven. Pass through food mill.','Fold mashed potato into p√¢te √† choux until just combined.','Roll into ¬æ" balls. Deep fry at 375¬∞F until golden.']
  },
];

// ‚îÄ‚îÄ STATE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let recipes = [];
let activeCategory = 'All';
let currentRecipeId = null;
let editMode = false;
let scaleFactor = 1;
let pinEntry = '';
let isAdmin = false;
let isAuthenticated = false;
let seedDone = false;
let pendingAdminUnlock = false;

// ‚îÄ‚îÄ AUTH STATE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
onAuthStateChanged(auth, (user) => {
  // Admin unlock flow
  if (user && pendingAdminUnlock) {
    pendingAdminUnlock = false;
    document.getElementById('auth-overlay').classList.remove('show');
    grantAdmin();
  }
  // Chat identity
  chatUser = user || null;
  updateChatAuthUI();
});

window.signInWithGoogle = async function() {
  try {
    await signInWithPopup(auth, provider);
  } catch(e) {
    alert('Sign-in failed. Please try again.');
  }
};

window.cancelAuth = function() {
  pendingAdminUnlock = false;
  document.getElementById('auth-overlay').classList.remove('show');
  // Fall back to staff access
  isAdmin = false;
  document.getElementById('pin-screen').style.display = 'none';
  document.getElementById('app').style.display = 'block';
  initApp();
};

// ‚îÄ‚îÄ PIN ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
window.pinKey = function(k) {
  if (pinEntry.length >= 4) return;
  pinEntry += k;
  updatePinDots();
  if (pinEntry.length === 4) checkPin();
};
window.pinDel = function() {
  pinEntry = pinEntry.slice(0,-1);
  updatePinDots();
  document.getElementById('pin-error').textContent = '';
};
function updatePinDots() {
  document.querySelectorAll('.pin-dot').forEach((d,i) => {
    d.classList.toggle('filled', i < pinEntry.length);
    d.classList.remove('error');
  });
}
function checkPin() {
  if (pinEntry === ADMIN_PIN) {
    // Check if already signed in to Google
    const user = auth.currentUser;
    if (user) {
      grantAdmin();
    } else {
      // Show Google sign-in
      pendingAdminUnlock = true;
      document.getElementById('auth-overlay').classList.add('show');
    }
  } else if (pinEntry === STAFF_PIN) {
    isAdmin = false;
    document.getElementById('pin-screen').style.display = 'none';
    document.getElementById('app').style.display = 'block';
    initApp();
  } else {
    document.querySelectorAll('.pin-dot').forEach(d => { d.classList.add('error'); d.classList.remove('filled'); });
    document.getElementById('pin-error').textContent = 'Incorrect PIN';
    setTimeout(() => { pinEntry = ''; updatePinDots(); document.getElementById('pin-error').textContent = ''; }, 1000);
  }
}
function grantAdmin() {
  isAdmin = true;
  document.getElementById('pin-screen').style.display = 'none';
  document.getElementById('app').style.display = 'block';
  document.getElementById('role-badge').style.display = 'inline';
  document.getElementById('add-btn').style.display = 'flex';
  document.getElementById('detail-actions').style.display = 'flex';
  initApp();
  setTimeout(pushMissingRecipes, 2000);
}

async function pushMissingRecipes() {
  const ids = ['h1','h2','h3','h4','h5','r24','r25','r26','r27','r28','r29','r30','r31','r32','r33','r34','r35','r36','r37','r38','r39','r40','r41','r42','r43','r44','r45','r46','r47','r48','r49','r50','r51','r52','r53','r54','r55','r56'];
  for (const id of ids) {
    const exists = recipes.find(x => x.id === id);
    if (!exists) {
      const r = DEFAULT_RECIPES.find(x => x.id === id);
      if (r) {
        try { await setDoc(doc(db, 'recipes', r.id), r); } catch(e) { console.error('push failed', r.id, e); }
      }
    }
  }
}

// ‚îÄ‚îÄ SYNC ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function showSync(msg) { document.getElementById('sync-msg').textContent = msg; document.getElementById('sync-bar').classList.add('show'); }
function hideSync() { document.getElementById('sync-bar').classList.remove('show'); }

async function seedDefaultRecipes() {
  showSync('Setting up recipes for first use‚Ä¶');
  for (const r of DEFAULT_RECIPES) {
    await setDoc(doc(db, 'recipes', r.id), r);
  }
  hideSync();
}

// ‚îÄ‚îÄ INIT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function initApp() {
  buildCategoryPills();
  populateCategorySelect();
  showSync('Loading recipes‚Ä¶');
  onSnapshot(collection(db, 'recipes'), async (snapshot) => {
    if (snapshot.empty && !seedDone) {
      seedDone = true;
      await seedDefaultRecipes();
      return;
    }
    seedDone = true;
    recipes = snapshot.docs.map(d => ({ id: d.id, ...d.data() }));
    hideSync();
    renderList();
    if (currentRecipeId) {
      const r = recipes.find(x => x.id === currentRecipeId);
      if (r) { renderIngredients(r); renderSteps(r); }
    }
  });
}

function buildCategoryPills() {
  document.getElementById('cat-pills').innerHTML = ['All', ...CATEGORIES].map(c =>
    `<div class="cat-pill ${c === activeCategory ? 'active' : ''}" onclick="setCategory('${c}')">${c}</div>`
  ).join('');
}
window.setCategory = function(cat) { activeCategory = cat; buildCategoryPills(); renderList(); };
function populateCategorySelect() {
  document.getElementById('f-cat').innerHTML = CATEGORIES.map(c => `<option value="${c}">${c}</option>`).join('');
}

// ‚îÄ‚îÄ LIST ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
window.renderList = function renderList() {
  const q = document.getElementById('search-input').value.toLowerCase();
  let filtered = recipes;
  if (activeCategory !== 'All') filtered = filtered.filter(r => r.category === activeCategory);
  if (q) filtered = filtered.filter(r => r.name.toLowerCase().includes(q) || (r.category||'').toLowerCase().includes(q));
  const container = document.getElementById('recipe-list');
  if (!filtered.length) { container.innerHTML = `<div class="empty-state"><div class="ei">‚åï</div><p>No recipes found</p></div>`; return; }
  const groups = {};
  filtered.forEach(r => { if (!groups[r.category]) groups[r.category] = []; groups[r.category].push(r); });
  let html = '';
  CATEGORIES.forEach(cat => {
    if (!groups[cat]) return;
    html += `<div class="cat-group-label">${cat}</div>`;
    groups[cat].sort((a,b) => a.name.localeCompare(b.name)).forEach(r => {
      html += `<div class="recipe-card" onclick="openDetail('${r.id}')"><div class="card-name">${r.name}</div>${r.yield ? `<div class="card-sub">${r.yield}</div>` : ''}<span class="card-arrow">‚Ä∫</span></div>`;
    });
  });
  container.innerHTML = html;
}

// ‚îÄ‚îÄ DETAIL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
window.openDetail = function(id) {
  currentRecipeId = id; scaleFactor = 1;
  const r = recipes.find(x => x.id === id); if (!r) return;
  document.getElementById('detail-name').textContent = r.name;
  document.getElementById('detail-note').textContent = r.yield || '';
  document.getElementById('detail-cat').textContent = r.category;
  document.getElementById('scale-val').textContent = '1√ó';
  renderIngredients(r); renderSteps(r);
  document.getElementById('detail-view').classList.add('open');
};
window.closeDetail = function() { document.getElementById('detail-view').classList.remove('open'); currentRecipeId = null; };

function renderIngredients(r) {
  const wrap = document.getElementById('detail-ingredients');
  if (!r.ingredients?.length) { wrap.innerHTML = ''; return; }
  wrap.innerHTML = `<div class="section-title">Ingredients</div>` +
    r.ingredients.map(ing => `<div class="ingredient-row"><span class="ing-amount">${scaleAmount(ing.amount, scaleFactor)}</span><span class="ing-name">${ing.name}</span></div>`).join('');
}
function renderSteps(r) {
  const wrap = document.getElementById('detail-steps-wrap');
  if (!r.steps?.length) { wrap.innerHTML = ''; return; }
  wrap.innerHTML = `<div class="section-title" style="margin-top:24px;">Method</div><div class="steps-list">` +
    r.steps.map((s,i) => `<div class="step-row"><div class="step-num">${i+1}</div><div class="step-text">${s}</div></div>`).join('') + `</div>`;
}
function scaleAmount(amount, factor) {
  if (factor === 1) return amount;
  return amount.replace(/[\d]+\.?[\d]*/g, m => { const n = parseFloat(m)*factor; return Number.isInteger(n) ? n : parseFloat(n.toFixed(2)); });
}
window.changeScale = function(dir) {
  scaleFactor = Math.max(0.25, scaleFactor + dir * 0.25);
  document.getElementById('scale-val').textContent = scaleFactor % 1 === 0 ? scaleFactor+'√ó' : scaleFactor.toFixed(2)+'√ó';
  const r = recipes.find(x => x.id === currentRecipeId); if (r) renderIngredients(r);
};

// ‚îÄ‚îÄ ADD / EDIT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
window.openAdd = function() {
  if (!isAdmin) return; editMode = false;
  document.getElementById('modal-title').textContent = 'New Recipe';
  ['f-name','f-yield','f-ingredients','f-steps'].forEach(id => document.getElementById(id).value = '');
  document.getElementById('f-cat').value = CATEGORIES[0];
  document.getElementById('modal-overlay').classList.add('open');
};
window.openEdit = function() {
  if (!isAdmin) return;
  const r = recipes.find(x => x.id === currentRecipeId); if (!r) return;
  editMode = true;
  document.getElementById('modal-title').textContent = 'Edit Recipe';
  document.getElementById('f-name').value = r.name;
  document.getElementById('f-cat').value = r.category;
  document.getElementById('f-yield').value = r.yield || '';
  document.getElementById('f-ingredients').value = (r.ingredients||[]).map(i => `${i.amount} ‚Äî ${i.name}`).join('\n');
  document.getElementById('f-steps').value = (r.steps||[]).join('\n');
  document.getElementById('modal-overlay').classList.add('open');
};
window.closeModal = function(e) { if (!e || e.target === document.getElementById('modal-overlay')) document.getElementById('modal-overlay').classList.remove('open'); };
window.saveRecipe = async function() {
  if (!isAdmin) return;
  const name = document.getElementById('f-name').value.trim();
  if (!name) { alert('Recipe name is required.'); return; }
  const data = {
    name, category: document.getElementById('f-cat').value,
    yield: document.getElementById('f-yield').value.trim(),
    ingredients: document.getElementById('f-ingredients').value.trim().split('\n').filter(Boolean).map(line => {
      const parts = line.split(/\s*[‚Äî\-‚Äì]\s*/);
      return parts.length >= 2 ? {amount: parts[0].trim(), name: parts.slice(1).join(' ‚Äî ').trim()} : {amount:'', name: line.trim()};
    }),
    steps: document.getElementById('f-steps').value.trim().split('\n').filter(Boolean)
  };
  showSync('Saving‚Ä¶');
  try {
    if (editMode) { await setDoc(doc(db, 'recipes', currentRecipeId), data); }
    else { await addDoc(collection(db, 'recipes'), data); }
    hideSync(); window.closeModal();
  } catch(e) { hideSync(); alert('Error saving. Check your connection.'); }
};
window.deleteRecipe = async function() {
  if (!isAdmin) return;
  if (!confirm('Delete this recipe? This cannot be undone.')) return;
  showSync('Deleting‚Ä¶');
  try {
    await deleteDoc(doc(db, 'recipes', currentRecipeId));
    hideSync(); window.closeDetail();
  } catch(e) { hideSync(); alert('Error deleting. Check your connection.'); }
};

// ‚îÄ‚îÄ CHAT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let chatUser = null; // Google user object for chat
let chatUnsubscribe = null;
let lastSeenTimestamp = parseInt(localStorage.getItem('beck_chat_last_seen') || '0');
let chatUnreadCount = 0;
let currentTab = 'recipes';

function updateChatAuthUI() {
  const authed = !!chatUser;
  const wall = document.getElementById('chat-signin-wall');
  const chatAuthed = document.getElementById('chat-authed');
  if (wall) wall.style.display = authed ? 'none' : 'flex';
  if (chatAuthed) chatAuthed.style.display = authed ? 'flex' : 'none';
  if (authed && chatAuthed) {
    const displayName = chatUser.displayName || chatUser.email.split('@')[0];
    document.getElementById('chat-user-name').textContent = displayName;
    if (!chatUnsubscribe) initChat();
  }
}

window.signInForChat = async function() {
  try {
    const provider = new GoogleAuthProvider();
    await signInWithPopup(auth, provider);
    // onAuthStateChanged handles the rest
  } catch(e) {
    if (e.code !== 'auth/popup-closed-by-user') alert('Sign-in failed. Try again.');
  }
};

window.signOutChat = async function() {
  if (!confirm('Sign out of Kitchen Chat?')) return;
  // Only sign out if NOT admin ‚Äî admin stays signed in
  if (isAdmin) {
    // Admin: just clear chat identity display but keep auth
    alert('You\'re signed in as Admin. Use the recipe controls to manage your session.');
    return;
  }
  await signOut(auth);
  chatUser = null;
  if (chatUnsubscribe) { chatUnsubscribe(); chatUnsubscribe = null; }
  updateChatAuthUI();
};

window.switchTab = function(tab) {
  currentTab = tab;
  const isChat = tab === 'chat';
  const isPrep = tab === 'prep';
  const isRecipes = tab === 'recipes';
  document.getElementById('tab-recipes').classList.toggle('active', isRecipes);
  document.getElementById('tab-prep').classList.toggle('active', isPrep);
  document.getElementById('tab-chat').classList.toggle('active', isChat);
  document.getElementById('recipe-search-bar').style.display = isRecipes ? '' : 'none';
  document.getElementById('cat-pills').style.display = isRecipes ? '' : 'none';
  document.getElementById('recipe-list').style.display = isRecipes ? '' : 'none';
  document.getElementById('prep-view').classList.toggle('active', isPrep);
  document.getElementById('chat-view').classList.toggle('active', isChat);

  if (isChat) {
    chatUnreadCount = 0;
    document.getElementById('chat-unread-badge').style.display = 'none';
    lastSeenTimestamp = Date.now();
    localStorage.setItem('beck_chat_last_seen', lastSeenTimestamp);
    updateChatAuthUI();
    setTimeout(() => scrollChatToBottom(), 100);
  }
  if (isPrep) {
    if (!prepUnsubscribe) initPrepList();
    document.getElementById('prep-date-text').textContent = new Date().toLocaleDateString('en-US', { weekday:'long', month:'long', day:'numeric' });
    document.getElementById('prep-upload-btn').style.display = isAdmin ? 'flex' : 'none';
    if (isAdmin) document.getElementById('prep-empty-sub').textContent = 'Upload an Excel file to create today\'s prep list.';
  }
};

function playMessageSound() {
  try {
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const o = ctx.createOscillator();
    const g = ctx.createGain();
    o.connect(g);
    g.connect(ctx.destination);
    o.type = 'sine';
    o.frequency.setValueAtTime(880, ctx.currentTime);
    o.frequency.exponentialRampToValueAtTime(660, ctx.currentTime + 0.15);
    g.gain.setValueAtTime(0.25, ctx.currentTime);
    g.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.4);
    o.start(ctx.currentTime);
    o.stop(ctx.currentTime + 0.4);
  } catch(e) {}
}

function initChat() {
  const q = query(collection(db, 'chat_messages'), orderBy('ts', 'asc'), limit(200));
  let isFirstLoad = true;
  chatUnsubscribe = onSnapshot(q, (snapshot) => {
    renderChatMessages(snapshot.docs.map(d => ({ id: d.id, ...d.data() })));
    const myName = chatUser ? (chatUser.displayName || chatUser.email.split('@')[0]) : '';
    if (!isFirstLoad) {
      const newMsgs = snapshot.docChanges().filter(c => c.type === 'added' && c.doc.data().sender !== myName);
      if (newMsgs.length > 0) playMessageSound();
    }
    isFirstLoad = false;
    if (currentTab !== 'chat') {
      const newUnread = snapshot.docs.filter(d => {
        const ts = d.data().ts?.toMillis ? d.data().ts.toMillis() : 0;
        return ts > lastSeenTimestamp && d.data().sender !== myName;
      }).length;
      if (newUnread > 0) {
        chatUnreadCount = newUnread;
        const badge = document.getElementById('chat-unread-badge');
        badge.textContent = newUnread > 9 ? '9+' : newUnread;
        badge.style.display = 'flex';
      }
    }
  });
}

function renderChatMessages(messages) {
  const container = document.getElementById('chat-messages');
  if (!container) return;
  if (!messages.length) {
    container.innerHTML = `<div class="chat-empty"><div class="chat-empty-icon">üí¨</div><div class="chat-empty-text">No messages yet</div><div class="chat-empty-sub">Be the first to say something</div></div>`;
    return;
  }
  let html = '';
  let lastDate = '';
  const myName = chatUser ? (chatUser.displayName || chatUser.email.split('@')[0]) : '';
  messages.forEach(msg => {
    const ts = msg.ts?.toMillis ? msg.ts.toMillis() : Date.now();
    const date = new Date(ts);
    const dateStr = date.toLocaleDateString('en-US', { weekday:'long', month:'short', day:'numeric' });
    if (dateStr !== lastDate) {
      html += `<div class="chat-day-divider">${dateStr}</div>`;
      lastDate = dateStr;
    }
    const isMine = msg.sender === myName;
    const timeStr = date.toLocaleTimeString('en-US', { hour:'numeric', minute:'2-digit' });
    html += `<div class="chat-msg ${isMine ? 'mine' : 'theirs'}">
      ${!isMine ? `<div class="chat-sender">${escapeHtml(msg.sender)}</div>` : ''}
      <div class="chat-bubble">${escapeHtml(msg.text)}</div>
      <div class="chat-time">${timeStr}</div>
    </div>`;
  });
  container.innerHTML = html;
  scrollChatToBottom();
}

function escapeHtml(str) {
  return String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

function scrollChatToBottom() {
  const c = document.getElementById('chat-messages');
  if (c) c.scrollTop = c.scrollHeight;
}

window.sendMessage = async function() {
  if (!chatUser) return;
  const input = document.getElementById('chat-input');
  const text = input.value.trim();
  if (!text) return;
  input.value = '';
  autoResizeTextarea(input);
  const displayName = chatUser.displayName || chatUser.email.split('@')[0];
  try {
    await addDoc(collection(db, 'chat_messages'), {
      text, sender: displayName, uid: chatUser.uid, ts: serverTimestamp()
    });
  } catch(e) { alert('Failed to send. Check your connection.'); }
};

window.chatKeydown = function(e) {
  if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendMessage(); }
};

// ‚îÄ‚îÄ PREP LIST ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let prepUnsubscribe = null;
let prepItems = [];

function initPrepList() {
  prepUnsubscribe = onSnapshot(doc(db, 'prep_list', 'current'), (snapshot) => {
    if (snapshot.exists()) {
      const data = snapshot.data();
      prepItems = data.items || [];
      renderPrepList(prepItems, data.title, data.uploadedAt);
    } else {
      prepItems = [];
      renderPrepList([], null, null);
    }
  });
}

function renderPrepList(items, title, uploadedAt) {
  const container = document.getElementById('prep-list-container');
  if (!items.length) {
    container.innerHTML = `<div class="prep-empty">
      <div class="prep-empty-icon">üìã</div>
      <div class="prep-empty-title">No Prep List</div>
      <div class="prep-empty-sub" id="prep-empty-sub">${isAdmin ? 'Upload an Excel file to create today\'s prep list.' : 'Ask the chef to upload today\'s prep list.'}</div>
    </div>`;
    document.getElementById('prep-progress-fill').style.width = '0%';
    return;
  }

  // Update progress bar
  const done = items.filter(i => i.status === 'done').length;
  const total = items.filter(i => i.section === undefined || i.section === false).length || items.length;
  const pct = total > 0 ? Math.round((done / items.length) * 100) : 0;
  document.getElementById('prep-progress-fill').style.width = pct + '%';
  if (title) document.getElementById('prep-title-text').textContent = title;

  // Group by section
  let html = '';
  let currentSection = '';
  items.forEach((item, idx) => {
    if (item.isSection) {
      currentSection = item.name;
      html += `<div class="prep-section-label">${item.name}</div>`;
      return;
    }
    const status = item.status || 'needed';
    const pillLabel = status === 'needed' ? 'Needed' : status === 'inprogress' ? 'In Progress' : 'Done';
    const nameClass = status === 'done' ? 'prep-item-name done-text' : 'prep-item-name';
    const qty = item.qty ? `${item.qty}${item.unit ? ' ' + item.unit : ''}` : '';
    html += `<div class="prep-item" onclick="cyclePrepStatus(${idx})">
      <span class="prep-status-pill ${status}">${pillLabel}</span>
      <span class="${nameClass}">${escapeHtml(item.name)}</span>
      ${qty ? `<span class="prep-item-qty">${escapeHtml(qty)}</span>` : ''}
    </div>`;
  });

  if (isAdmin) {
    html += `<button class="prep-reset-btn" onclick="resetPrepList()">Reset All to Needed</button>`;
  }
  container.innerHTML = html;
}

window.cyclePrepStatus = async function(idx) {
  const item = prepItems[idx];
  if (!item || item.isSection) return;
  const cycle = { needed: 'inprogress', inprogress: 'done', done: 'needed' };
  const newStatus = cycle[item.status || 'needed'];
  prepItems[idx] = { ...item, status: newStatus };
  playMessageSound();
  try {
    await setDoc(doc(db, 'prep_list', 'current'), { items: prepItems }, { merge: true });
  } catch(e) { console.error('Prep update failed', e); }
};

window.resetPrepList = async function() {
  if (!isAdmin) return;
  if (!confirm('Reset all items to Needed?')) return;
  const reset = prepItems.map(i => i.isSection ? i : { ...i, status: 'needed' });
  await setDoc(doc(db, 'prep_list', 'current'), { items: reset }, { merge: true });
};

window.handlePrepUpload = async function(event) {
  if (!isAdmin) return;
  const file = event.target.files[0];
  if (!file) return;
  showSync('Parsing prep list‚Ä¶');
  try {
    const XLSX = await import('https://cdn.sheetjs.com/xlsx-0.20.1/package/xlsx.mjs');
    const buf = await file.arrayBuffer();
    const wb = XLSX.read(buf);
    const ws = wb.Sheets[wb.SheetNames[0]];
    const rows = XLSX.utils.sheet_to_json(ws, { header: 1, defval: null });

    const items = [];
    rows.forEach(row => {
      const name = row[0] ? String(row[0]).trim() : null;
      if (!name) return;
      const qty = row[1] !== null && row[1] !== undefined ? String(row[1]).trim() : '';
      const unit = row[2] ? String(row[2]).trim() : '';
      // Detect section headers ‚Äî no qty/unit and title-case or all-caps
      const isSection = (!qty || qty === '') && (!unit || unit === '');
      items.push({ name, qty: isSection ? '' : qty, unit: isSection ? '' : unit, isSection, status: 'needed' });
    });

    const title = file.name.replace(/\.(xlsx|xls)$/i, '');
    await setDoc(doc(db, 'prep_list', 'current'), {
      items, title,
      uploadedAt: serverTimestamp(),
      uploadedBy: chatUser ? (chatUser.displayName || chatUser.email) : 'Admin'
    });
    hideSync();
    event.target.value = '';
  } catch(e) {
    hideSync();
    console.error(e);
    alert('Failed to parse Excel file. Make sure it\'s a valid .xlsx file.');
  }
};

window.autoResizeTextarea = function(el) {
  el.style.height = 'auto';
  el.style.height = Math.min(el.scrollHeight, 100) + 'px';
};
</script>
</body>
</html>
